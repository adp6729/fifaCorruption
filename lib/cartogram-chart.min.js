!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n.Cartogram=t()}(this,function(){"use strict";function n(n){var t=n+="",e=t.indexOf(":");return e>=0&&"xmlns"!==(t=n.slice(0,e))&&(n=n.slice(e+1)),gt.hasOwnProperty(t)?{space:gt[t],local:n}:n}function t(t){var e=n(t);return(e.local?function(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}:function(n){return function(){var t=this.ownerDocument,e=this.namespaceURI;return e===vt&&t.documentElement.namespaceURI===vt?t.createElement(n):t.createElementNS(e,n)}})(e)}function e(n,t,e){return n=r(n,t,e),function(t){var e=t.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||n.call(this,t)}}function r(n,t,e){return function(r){var i=xt;xt=r;try{n.call(this,this.__data__,t,e)}finally{xt=i}}}function i(n){return function(){var t=this.__on;if(t){for(var e,r=0,i=-1,o=t.length;r<o;++r)e=t[r],n.type&&e.type!==n.type||e.name!==n.name?t[++i]=e:this.removeEventListener(e.type,e.listener,e.capture);++i?t.length=i:delete this.__on}}}function o(n,t,i){var o=bt.hasOwnProperty(n.type)?e:r;return function(e,r,u){var a,l=this.__on,c=o(t,r,u);if(l)for(var f=0,s=l.length;f<s;++f)if((a=l[f]).type===n.type&&a.name===n.name)return this.removeEventListener(a.type,a.listener,a.capture),this.addEventListener(a.type,a.listener=c,a.capture=i),void(a.value=t);this.addEventListener(n.type,c,i),a={type:n.type,name:n.name,value:t,listener:c,capture:i},l?l.push(a):this.__on=[a]}}function u(){}function a(n){return null==n?u:function(){return this.querySelector(n)}}function l(){return[]}function c(n){return null==n?l:function(){return this.querySelectorAll(n)}}function f(n){return new Array(n.length)}function s(n,t){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=t}function h(n,t,e,r,i,o){for(var u,a=0,l=t.length,c=o.length;a<c;++a)(u=t[a])?(u.__data__=o[a],r[a]=u):e[a]=new s(n,o[a]);for(;a<l;++a)(u=t[a])&&(i[a]=u)}function p(n,t,e,r,i,o,u){var a,l,c,f={},h=t.length,p=o.length,d=new Array(h);for(a=0;a<h;++a)(l=t[a])&&(d[a]=c=Et+u.call(l,l.__data__,a,t),c in f?i[a]=l:f[c]=l);for(a=0;a<p;++a)(l=f[c=Et+u.call(n,o[a],a,o)])?(r[a]=l,l.__data__=o[a],f[c]=null):e[a]=new s(n,o[a]);for(a=0;a<h;++a)(l=t[a])&&f[d[a]]===l&&(i[a]=l)}function d(n,t){return n<t?-1:n>t?1:n>=t?0:NaN}function v(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function g(n,t){return n.style.getPropertyValue(t)||v(n).getComputedStyle(n,null).getPropertyValue(t)}function y(n){return n.trim().split(/^|\s+/)}function m(n){return n.classList||new w(n)}function w(n){this._node=n,this._names=y(n.getAttribute("class")||"")}function _(n,t){for(var e=m(n),r=-1,i=t.length;++r<i;)e.add(t[r])}function b(n,t){for(var e=m(n),r=-1,i=t.length;++r<i;)e.remove(t[r])}function x(){this.textContent=""}function E(){this.innerHTML=""}function S(){this.nextSibling&&this.parentNode.appendChild(this)}function M(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function N(){return null}function k(){var n=this.parentNode;n&&n.removeChild(this)}function A(n,t,e){var r=v(n),i=r.CustomEvent;"function"==typeof i?i=new i(t,e):(i=r.document.createEvent("Event"),e?(i.initEvent(t,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(t,!1,!1)),n.dispatchEvent(i)}function P(n,t){this._groups=n,this._parents=t}function j(){return new P([[document.documentElement]],St)}function O(n){return"string"==typeof n?new P([[document.querySelector(n)]],[document.documentElement]):new P([[n]],St)}function C(){for(var n,t=0,e=arguments.length,r={};t<e;++t){if(!(n=arguments[t]+"")||n in r)throw new Error("illegal type: "+n);r[n]=[]}return new q(r)}function q(n){this._=n}function T(n,t,e){for(var r=0,i=n.length;r<i;++r)if(n[r].name===t){n[r]=Mt,n=n.slice(0,r).concat(n.slice(r+1));break}return null!=e&&n.push({name:t,value:e}),n}function I(){return qt||(Lt(L),qt=It.now()+Tt)}function L(){qt=0}function z(){this._call=this._time=this._next=null}function R(n,t,e){var r=new z;return r.restart(n,t,e),r}function F(){qt=(Ct=It.now())+Tt,At=Pt=0;try{!function(){I(),++At;for(var n,t=Nt;t;)(n=qt-t._time)>=0&&t._call.call(null,n),t=t._next;--At}()}finally{At=0,function(){var n,t,e=Nt,r=1/0;for(;e;)e._call?(r>e._time&&(r=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:Nt=t);kt=n,X(r)}(),qt=0}}function D(){var n=It.now(),t=n-Ct;t>Ot&&(Tt-=t,Ct=n)}function X(n){if(!At){Pt&&(Pt=clearTimeout(Pt));n-qt>24?(n<1/0&&(Pt=setTimeout(F,n-It.now()-Tt)),jt&&(jt=clearInterval(jt))):(jt||(Ct=It.now(),jt=setInterval(D,Ot)),At=1,Lt(F))}}function V(n,t,e){var r=new z;return t=null==t?0:+t,r.restart(function(e){r.stop(),n(e+t)},t,e),r}function H(n,t,e,r,i,o){var u=n.__transition;if(u){if(e in u)return}else n.__transition={};!function(n,t,e){function r(l){var c,f,s,h;if(e.state!==Dt)return o();for(c in a)if((h=a[c]).name===e.name){if(h.state===Vt)return V(r);h.state===Ht?(h.state=$t,h.timer.stop(),h.on.call("interrupt",n,n.__data__,h.index,h.group),delete a[c]):+c<t&&(h.state=$t,h.timer.stop(),delete a[c])}if(V(function(){e.state===Vt&&(e.state=Ht,e.timer.restart(i,e.delay,e.time),i(l))}),e.state=Xt,e.on.call("start",n,n.__data__,e.index,e.group),e.state===Xt){for(e.state=Vt,u=new Array(s=e.tween.length),c=0,f=-1;c<s;++c)(h=e.tween[c].value.call(n,n.__data__,e.index,e.group))&&(u[++f]=h);u.length=f+1}}function i(t){for(var r=t<e.duration?e.ease.call(null,t/e.duration):(e.timer.restart(o),e.state=Yt,1),i=-1,a=u.length;++i<a;)u[i].call(null,r);e.state===Yt&&(e.on.call("end",n,n.__data__,e.index,e.group),o())}function o(){e.state=$t,e.timer.stop(),delete a[t];for(var r in a)return;delete n.__transition}var u,a=n.__transition;a[t]=e,e.timer=R(function(n){e.state=Dt,e.timer.restart(r,e.delay,e.time),e.delay<=n&&r(n-e.delay)},0,e.time)}(n,e,{name:t,index:r,group:i,on:zt,tween:Rt,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Ft})}function Y(n,t){var e=U(n,t);if(e.state>Ft)throw new Error("too late; already scheduled");return e}function $(n,t){var e=U(n,t);if(e.state>Xt)throw new Error("too late; already started");return e}function U(n,t){var e=n.__transition;if(!e||!(e=e[t]))throw new Error("transition not found");return e}function B(n,t,e){n.prototype=t.prototype=e,e.constructor=n}function J(n,t){var e=Object.create(n.prototype);for(var r in t)e[r]=t[r];return e}function G(){}function W(n){var t;return n=(n+"").trim().toLowerCase(),(t=Gt.exec(n))?(t=parseInt(t[1],16),new tn(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1)):(t=Wt.exec(n))?K(parseInt(t[1],16)):(t=Kt.exec(n))?new tn(t[1],t[2],t[3],1):(t=Qt.exec(n))?new tn(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Zt.exec(n))?Q(t[1],t[2],t[3],t[4]):(t=ne.exec(n))?Q(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=te.exec(n))?en(t[1],t[2]/100,t[3]/100,1):(t=ee.exec(n))?en(t[1],t[2]/100,t[3]/100,t[4]):re.hasOwnProperty(n)?K(re[n]):"transparent"===n?new tn(NaN,NaN,NaN,0):null}function K(n){return new tn(n>>16&255,n>>8&255,255&n,1)}function Q(n,t,e,r){return r<=0&&(n=t=e=NaN),new tn(n,t,e,r)}function Z(n){return n instanceof G||(n=W(n)),n?(n=n.rgb(),new tn(n.r,n.g,n.b,n.opacity)):new tn}function nn(n,t,e,r){return 1===arguments.length?Z(n):new tn(n,t,e,null==r?1:r)}function tn(n,t,e,r){this.r=+n,this.g=+t,this.b=+e,this.opacity=+r}function en(n,t,e,r){return r<=0?n=t=e=NaN:e<=0||e>=1?n=t=NaN:t<=0&&(n=NaN),new rn(n,t,e,r)}function rn(n,t,e,r){this.h=+n,this.s=+t,this.l=+e,this.opacity=+r}function on(n,t,e){return 255*(n<60?t+(e-t)*n/60:n<180?e:n<240?t+(e-t)*(240-n)/60:t)}function un(n){if(n instanceof an)return new an(n.l,n.a,n.b,n.opacity);if(n instanceof hn){var t=n.h*ie;return new an(n.l,Math.cos(t)*n.c,Math.sin(t)*n.c,n.opacity)}n instanceof tn||(n=Z(n));var e=sn(n.r),r=sn(n.g),i=sn(n.b),o=ln((.4124564*e+.3575761*r+.1804375*i)/ue),u=ln((.2126729*e+.7151522*r+.072175*i)/ae);return new an(116*u-16,500*(o-u),200*(u-ln((.0193339*e+.119192*r+.9503041*i)/le)),n.opacity)}function an(n,t,e,r){this.l=+n,this.a=+t,this.b=+e,this.opacity=+r}function ln(n){return n>he?Math.pow(n,1/3):n/se+ce}function cn(n){return n>fe?n*n*n:se*(n-ce)}function fn(n){return 255*(n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055)}function sn(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function hn(n,t,e,r){this.h=+n,this.c=+t,this.l=+e,this.opacity=+r}function pn(n,t,e,r){this.h=+n,this.s=+t,this.l=+e,this.opacity=+r}function dn(n){return function(){return n}}function vn(n){return 1==(n=+n)?gn:function(t,e){return e-t?function(n,t,e){return n=Math.pow(n,e),t=Math.pow(t,e)-n,e=1/e,function(r){return Math.pow(n+r*t,e)}}(t,e,n):dn(isNaN(t)?e:t)}}function gn(n,t){var e=t-n;return e?function(n,t){return function(e){return n+e*t}}(n,e):dn(isNaN(n)?t:n)}function yn(n,t){return n=+n,t-=n,function(e){return n+t*e}}function mn(n,t,e,r,i,o){var u,a,l;return(u=Math.sqrt(n*n+t*t))&&(n/=u,t/=u),(l=n*e+t*r)&&(e-=n*l,r-=t*l),(a=Math.sqrt(e*e+r*r))&&(e/=a,r/=a,l/=a),n*r<t*e&&(n=-n,t=-t,l=-l,u=-u),{translateX:i,translateY:o,rotate:Math.atan2(t,n)*Ne,skewX:Math.atan(l)*Ne,scaleX:u,scaleY:a}}function wn(n,t,e,r){function i(n){return n.length?n.pop()+" ":""}return function(o,u){var a=[],l=[];return o=n(o),u=n(u),function(n,r,i,o,u,a){if(n!==i||r!==o){var l=u.push("translate(",null,t,null,e);a.push({i:l-4,x:yn(n,i)},{i:l-2,x:yn(r,o)})}else(i||o)&&u.push("translate("+i+t+o+e)}(o.translateX,o.translateY,u.translateX,u.translateY,a,l),function(n,t,e,o){n!==t?(n-t>180?t+=360:t-n>180&&(n+=360),o.push({i:e.push(i(e)+"rotate(",null,r)-2,x:yn(n,t)})):t&&e.push(i(e)+"rotate("+t+r)}(o.rotate,u.rotate,a,l),function(n,t,e,o){n!==t?o.push({i:e.push(i(e)+"skewX(",null,r)-2,x:yn(n,t)}):t&&e.push(i(e)+"skewX("+t+r)}(o.skewX,u.skewX,a,l),function(n,t,e,r,o,u){if(n!==e||t!==r){var a=o.push(i(o)+"scale(",null,",",null,")");u.push({i:a-4,x:yn(n,e)},{i:a-2,x:yn(t,r)})}else 1===e&&1===r||o.push(i(o)+"scale("+e+","+r+")")}(o.scaleX,o.scaleY,u.scaleX,u.scaleY,a,l),o=u=null,function(n){for(var t,e=-1,r=l.length;++e<r;)a[(t=l[e]).i]=t.x(n);return a.join("")}}}function _n(n,t,e){var r=n._id;return n.each(function(){var n=$(this,r);(n.value||(n.value={}))[t]=e.apply(this,arguments)}),function(n){return U(n,r).value[t]}}function bn(n,t){var e;return("number"==typeof t?yn:t instanceof W?Ee:(e=W(t))?(t=e,Ee):function(n,t){var e,r,i,o=Se.lastIndex=Me.lastIndex=0,u=-1,a=[],l=[];for(n+="",t+="";(e=Se.exec(n))&&(r=Me.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),a[u]?a[u]+=i:a[++u]=i),(e=e[0])===(r=r[0])?a[u]?a[u]+=r:a[++u]=r:(a[++u]=null,l.push({i:u,x:yn(e,r)})),o=Me.lastIndex;return o<t.length&&(i=t.slice(o),a[u]?a[u]+=i:a[++u]=i),a.length<2?l[0]?function(n){return function(t){return n(t)+""}}(l[0].x):function(n){return function(){return n}}(t):(t=l.length,function(n){for(var e,r=0;r<t;++r)a[(e=l[r]).i]=e.x(n);return a.join("")})})(n,t)}function xn(n,t,e,r){this._groups=n,this._parents=t,this._name=e,this._id=r}function En(){return++Oe}function Sn(n,t){for(var e;!(e=n.__transition)||!(e=e[t]);)if(!(n=n.parentNode))return qe.time=I(),qe;return e}function Mn(){return new Nn}function Nn(){this.reset()}function kn(n,t,e){var r=n.s=t+e,i=r-t,o=r-i;n.t=t-o+(e-i)}function An(n){return n>1?ze:n<-1?-ze:Math.asin(n)}function Pn(){}function jn(n,t){n&&Qe.hasOwnProperty(n.type)&&Qe[n.type](n,t)}function On(n,t,e){var r,i=-1,o=n.length-e;for(t.lineStart();++i<o;)r=n[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function Cn(n,t){var e=-1,r=n.length;for(t.polygonStart();++e<r;)On(n[e],t,1);t.polygonEnd()}function qn(n){return[Ye(n[1],n[0]),An(n[2])]}function Tn(n){var t=n[0],e=n[1],r=$e(e);return[r*$e(t),r*Je(t),Je(e)]}function In(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function Ln(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function zn(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function Rn(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function Fn(n){var t=Ge(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function Dn(n,t){function e(e,r){return e=n(e,r),t(e[0],e[1])}return n.invert&&t.invert&&(e.invert=function(e,r){return(e=t.invert(e,r))&&n.invert(e[0],e[1])}),e}function Xn(n,t){return[n>Le?n-Fe:n<-Le?n+Fe:n,t]}function Vn(n,t,e){return(n%=Fe)?t||e?Dn(Yn(n),$n(t,e)):Yn(n):t||e?$n(t,e):Xn}function Hn(n){return function(t,e){return t+=n,[t>Le?t-Fe:t<-Le?t+Fe:t,e]}}function Yn(n){var t=Hn(n);return t.invert=Hn(-n),t}function $n(n,t){function e(n,t){var e=$e(t),a=$e(n)*e,l=Je(n)*e,c=Je(t),f=c*r+a*i;return[Ye(l*o-f*u,a*r-c*i),An(f*o+l*u)]}var r=$e(n),i=Je(n),o=$e(t),u=Je(t);return e.invert=function(n,t){var e=$e(t),a=$e(n)*e,l=Je(n)*e,c=Je(t),f=c*o-l*u;return[Ye(l*o+c*u,a*r+f*i),An(f*r-a*i)]},e}function Un(n,t){(t=Tn(t))[0]-=n,Fn(t);var e=function(n){return n>1?0:n<-1?Le:Math.acos(n)}(-t[1]);return((-t[2]<0?-e:e)+Fe-Ie)%Fe}function Bn(){var n,t=[];return{point:function(t,e){n.push([t,e])},lineStart:function(){t.push(n=[])},lineEnd:Pn,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var e=t;return t=[],n=null,e}}}function Jn(n,t){return Ve(n[0]-t[0])<Ie&&Ve(n[1]-t[1])<Ie}function Gn(n,t,e,r){this.x=n,this.z=t,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function Wn(n,t,e,r,i){var o,u,a=[],l=[];if(n.forEach(function(n){if(!((t=n.length-1)<=0)){var t,e,r=n[0],u=n[t];if(Jn(r,u)){for(i.lineStart(),o=0;o<t;++o)i.point((r=n[o])[0],r[1]);i.lineEnd()}else a.push(e=new Gn(r,n,null,!0)),l.push(e.o=new Gn(r,null,e,!1)),a.push(e=new Gn(u,n,null,!1)),l.push(e.o=new Gn(u,null,e,!0))}}),a.length){for(l.sort(t),Kn(a),Kn(l),o=0,u=l.length;o<u;++o)l[o].e=e=!e;for(var c,f,s=a[0];;){for(var h=s,p=!0;h.v;)if((h=h.n)===s)return;c=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(o=0,u=c.length;o<u;++o)i.point((f=c[o])[0],f[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(p)for(c=h.p.z,o=c.length-1;o>=0;--o)i.point((f=c[o])[0],f[1]);else r(h.x,h.p.x,-1,i);h=h.p}c=(h=h.o).z,p=!p}while(!h.v);i.lineEnd()}}}function Kn(n){if(t=n.length){for(var t,e,r=0,i=n[0];++r<t;)i.n=e=n[r],e.p=i,i=e;i.n=e=n[0],e.p=i}}function Qn(n,t){return n<t?-1:n>t?1:n>=t?0:NaN}function Zn(n){for(var t,e,r,i=n.length,o=-1,u=0;++o<i;)u+=n[o].length;for(e=new Array(u);--i>=0;)for(t=(r=n[i]).length;--t>=0;)e[--u]=r[t];return e}function nt(n,t,e,r){return function(i){function o(t,e){n(t,e)&&i.point(t,e)}function u(n,t){v.point(n,t)}function a(){w.point=u,v.lineStart()}function l(){w.point=o,v.lineEnd()}function c(n,t){d.push([n,t]),y.point(n,t)}function f(){y.lineStart(),d=[]}function s(){c(d[0][0],d[0][1]),y.lineEnd();var n,t,e,r,o=y.clean(),u=g.result(),a=u.length;if(d.pop(),h.push(d),d=null,a)if(1&o){if(e=u[0],(t=e.length-1)>0){for(m||(i.polygonStart(),m=!0),i.lineStart(),n=0;n<t;++n)i.point((r=e[n])[0],r[1]);i.lineEnd()}}else a>1&&2&o&&u.push(u.pop().concat(u.shift())),p.push(u.filter(tt))}var h,p,d,v=t(i),g=Bn(),y=t(g),m=!1,w={point:o,lineStart:a,lineEnd:l,polygonStart:function(){w.point=c,w.lineStart=f,w.lineEnd=s,p=[],h=[]},polygonEnd:function(){w.point=o,w.lineStart=a,w.lineEnd=l,p=Zn(p);var n=function(n,t){var e=t[0],r=t[1],i=[Je(e),-$e(e),0],o=0,u=0;Ze.reset();for(var a=0,l=n.length;a<l;++a)if(f=(c=n[a]).length)for(var c,f,s=c[f-1],h=s[0],p=s[1]/2+Re,d=Je(p),v=$e(p),g=0;g<f;++g,h=m,d=_,v=b,s=y){var y=c[g],m=y[0],w=y[1]/2+Re,_=Je(w),b=$e(w),x=m-h,E=x>=0?1:-1,S=E*x,M=S>Le,N=d*_;if(Ze.add(Ye(N*E*Je(S),v*b+N*$e(S))),o+=M?x+E*Fe:x,M^h>=e^m>=e){var k=Ln(Tn(s),Tn(y));Fn(k);var A=Ln(i,k);Fn(A);var P=(M^x>=0?-1:1)*An(A[2]);(r>P||r===P&&(k[0]||k[1]))&&(u+=M^x>=0?1:-1)}}return(o<-Ie||o<Ie&&Ze<-Ie)^1&u}(h,r);p.length?(m||(i.polygonStart(),m=!0),Wn(p,et,n,e,i)):n&&(m||(i.polygonStart(),m=!0),i.lineStart(),e(null,null,1,i),i.lineEnd()),m&&(i.polygonEnd(),m=!1),p=h=null},sphere:function(){i.polygonStart(),i.lineStart(),e(null,null,1,i),i.lineEnd(),i.polygonEnd()}};return w}}function tt(n){return n.length>1}function et(n,t){return((n=n.x)[0]<0?n[1]-ze-Ie:ze-n[1])-((t=t.x)[0]<0?t[1]-ze-Ie:ze-t[1])}function rt(n){function t(n,t){return $e(n)*$e(t)>i}function e(n,t,e){var r=[1,0,0],o=Ln(Tn(n),Tn(t)),u=In(o,o),a=o[0],l=u-a*a;if(!l)return!e&&n;var c=i*u/l,f=-i*a/l,s=Ln(r,o),h=Rn(r,c);zn(h,Rn(o,f));var p=s,d=In(h,p),v=In(p,p),g=d*d-v*(In(h,h)-1);if(!(g<0)){var y=Ge(g),m=Rn(p,(-d-y)/v);if(zn(m,h),m=qn(m),!e)return m;var w,_=n[0],b=t[0],x=n[1],E=t[1];b<_&&(w=_,_=b,b=w);var S=b-_,M=Ve(S-Le)<Ie;if(!M&&E<x&&(w=x,x=E,E=w),M||S<Ie?M?x+E>0^m[1]<(Ve(m[0]-_)<Ie?x:E):x<=m[1]&&m[1]<=E:S>Le^(_<=m[0]&&m[0]<=b)){var N=Rn(p,(-d+y)/v);return zn(N,h),[m,qn(N)]}}}function r(t,e){var r=u?n:Le-n,i=0;return t<-r?i|=1:t>r&&(i|=2),e<-r?i|=4:e>r&&(i|=8),i}var i=$e(n),o=6*Xe,u=i>0,a=Ve(i)>Ie;return nt(t,function(n){var i,o,l,c,f;return{lineStart:function(){c=l=!1,f=1},point:function(s,h){var p,d=[s,h],v=t(s,h),g=u?v?0:r(s,h):v?r(s+(s<0?Le:-Le),h):0;if(!i&&(c=l=v)&&n.lineStart(),v!==l&&(!(p=e(i,d))||Jn(i,p)||Jn(d,p))&&(d[0]+=Ie,d[1]+=Ie,v=t(d[0],d[1])),v!==l)f=0,v?(n.lineStart(),p=e(d,i),n.point(p[0],p[1])):(p=e(i,d),n.point(p[0],p[1]),n.lineEnd()),i=p;else if(a&&i&&u^v){var y;g&o||!(y=e(d,i,!0))||(f=0,u?(n.lineStart(),n.point(y[0][0],y[0][1]),n.point(y[1][0],y[1][1]),n.lineEnd()):(n.point(y[1][0],y[1][1]),n.lineEnd(),n.lineStart(),n.point(y[0][0],y[0][1])))}!v||i&&Jn(i,d)||n.point(d[0],d[1]),i=d,l=v,o=g},lineEnd:function(){l&&n.lineEnd(),i=null},clean:function(){return f|(c&&l)<<1}}},function(t,e,r,i){!function(n,t,e,r,i,o){if(e){var u=$e(t),a=Je(t),l=r*e;null==i?(i=t+r*Fe,o=t-l/2):(i=Un(u,i),o=Un(u,o),(r>0?i<o:i>o)&&(i+=r*Fe));for(var c,f=i;r>0?f>o:f<o;f-=l)c=qn([u,-a*$e(f),-a*Je(f)]),n.point(c[0],c[1])}}(i,n,o,r,t,e)},u?[0,-n]:[-Le,n-Le])}function it(n,t,e,r){function i(i,o){return n<=i&&i<=e&&t<=o&&o<=r}function o(i,o,a,c){var f=0,s=0;if(null==i||(f=u(i,a))!==(s=u(o,a))||l(i,o)<0^a>0)do{c.point(0===f||3===f?n:e,f>1?r:t)}while((f=(f+a+4)%4)!==s);else c.point(o[0],o[1])}function u(r,i){return Ve(r[0]-n)<Ie?i>0?0:3:Ve(r[0]-e)<Ie?i>0?2:1:Ve(r[1]-t)<Ie?i>0?1:0:i>0?3:2}function a(n,t){return l(n.x,t.x)}function l(n,t){var e=u(n,1),r=u(t,1);return e!==r?e-r:0===e?t[1]-n[1]:1===e?n[0]-t[0]:2===e?n[1]-t[1]:t[0]-n[0]}return function(u){function l(n,t){i(n,t)&&b.point(n,t)}function c(o,u){var a=i(o,u);if(s&&h.push([o,u]),w)p=o,d=u,v=a,w=!1,a&&(b.lineStart(),b.point(o,u));else if(a&&m)b.point(o,u);else{var l=[g=Math.max(er,Math.min(tr,g)),y=Math.max(er,Math.min(tr,y))],c=[o=Math.max(er,Math.min(tr,o)),u=Math.max(er,Math.min(tr,u))];!function(n,t,e,r,i,o){var u,a=n[0],l=n[1],c=0,f=1,s=t[0]-a,h=t[1]-l;if(u=e-a,s||!(u>0)){if(u/=s,s<0){if(u<c)return;u<f&&(f=u)}else if(s>0){if(u>f)return;u>c&&(c=u)}if(u=i-a,s||!(u<0)){if(u/=s,s<0){if(u>f)return;u>c&&(c=u)}else if(s>0){if(u<c)return;u<f&&(f=u)}if(u=r-l,h||!(u>0)){if(u/=h,h<0){if(u<c)return;u<f&&(f=u)}else if(h>0){if(u>f)return;u>c&&(c=u)}if(u=o-l,h||!(u<0)){if(u/=h,h<0){if(u>f)return;u>c&&(c=u)}else if(h>0){if(u<c)return;u<f&&(f=u)}return c>0&&(n[0]=a+c*s,n[1]=l+c*h),f<1&&(t[0]=a+f*s,t[1]=l+f*h),!0}}}}}(l,c,n,t,e,r)?a&&(b.lineStart(),b.point(o,u),_=!1):(m||(b.lineStart(),b.point(l[0],l[1])),b.point(c[0],c[1]),a||b.lineEnd(),_=!1)}g=o,y=u,m=a}var f,s,h,p,d,v,g,y,m,w,_,b=u,x=Bn(),E={point:l,lineStart:function(){E.point=c,s&&s.push(h=[]),w=!0,m=!1,g=y=NaN},lineEnd:function(){f&&(c(p,d),v&&m&&x.rejoin(),f.push(x.result())),E.point=l,m&&b.lineEnd()},polygonStart:function(){b=x,f=[],s=[],_=!0},polygonEnd:function(){var t=function(){for(var t=0,e=0,i=s.length;e<i;++e)for(var o,u,a=s[e],l=1,c=a.length,f=a[0],h=f[0],p=f[1];l<c;++l)o=h,u=p,h=(f=a[l])[0],p=f[1],u<=r?p>r&&(h-o)*(r-u)>(p-u)*(n-o)&&++t:p<=r&&(h-o)*(r-u)<(p-u)*(n-o)&&--t;return t}(),e=_&&t,i=(f=Zn(f)).length;(e||i)&&(u.polygonStart(),e&&(u.lineStart(),o(null,null,1,u),u.lineEnd()),i&&Wn(f,a,t,o,u),u.polygonEnd()),b=u,f=s=h=null}};return E}}function ot(n){return n}function ut(n){return function(t){var e=new at;for(var r in n)e[r]=n[r];return e.stream=t,e}}function at(){}function lt(n,t,e){var r=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),null!=r&&n.clipExtent(null),function(n,t){n&&Ke.hasOwnProperty(n.type)?Ke[n.type](n,t):jn(n,t)}(e,n.stream(ar)),t(ar.result()),null!=r&&n.clipExtent(r),n}function ct(n,t,e){return lt(n,function(e){var r=t[1][0]-t[0][0],i=t[1][1]-t[0][1],o=Math.min(r/(e[1][0]-e[0][0]),i/(e[1][1]-e[0][1])),u=+t[0][0]+(r-o*(e[1][0]+e[0][0]))/2,a=+t[0][1]+(i-o*(e[1][1]+e[0][1]))/2;n.scale(150*o).translate([u,a])},e)}function ft(n,t){return+t?function(n,t){function e(r,i,o,u,a,l,c,f,s,h,p,d,v,g){var y=c-r,m=f-i,w=y*y+m*m;if(w>4*t&&v--){var _=u+h,b=a+p,x=l+d,E=Ge(_*_+b*b+x*x),S=An(x/=E),M=Ve(Ve(x)-1)<Ie||Ve(o-s)<Ie?(o+s)/2:Ye(b,_),N=n(M,S),k=N[0],A=N[1],P=k-r,j=A-i,O=m*P-y*j;(O*O/w>t||Ve((y*P+m*j)/w-.5)>.3||u*h+a*p+l*d<cr)&&(e(r,i,o,u,a,l,k,A,M,_/=E,b/=E,x,v,g),g.point(k,A),e(k,A,M,_,b,x,c,f,s,h,p,d,v,g))}}return function(t){function r(e,r){e=n(e,r),t.point(e[0],e[1])}function i(){y=NaN,x.point=o,t.lineStart()}function o(r,i){var o=Tn([r,i]),u=n(r,i);e(y,m,g,w,_,b,y=u[0],m=u[1],g=r,w=o[0],_=o[1],b=o[2],lr,t),t.point(y,m)}function u(){x.point=r,t.lineEnd()}function a(){i(),x.point=l,x.lineEnd=c}function l(n,t){o(f=n,t),s=y,h=m,p=w,d=_,v=b,x.point=o}function c(){e(y,m,g,w,_,b,s,h,f,p,d,v,lr,t),x.lineEnd=u,u()}var f,s,h,p,d,v,g,y,m,w,_,b,x={point:r,lineStart:i,lineEnd:u,polygonStart:function(){t.polygonStart(),x.lineStart=a},polygonEnd:function(){t.polygonEnd(),x.lineStart=i}};return x}}(n,t):function(n){return ut({point:function(t,e){t=n(t,e),this.stream.point(t[0],t[1])}})}(n)}function st(n){return function(n){function t(n){return n=c(n[0]*Xe,n[1]*Xe),[n[0]*v+u,a-n[1]*v]}function e(n,t){return n=o(n,t),[n[0]*v+u,a-n[1]*v]}function r(){c=Dn(l=Vn(_,b,x),o);var n=o(m,w);return u=g-n[0]*v,a=y+n[1]*v,i()}function i(){return p=d=null,t}var o,u,a,l,c,f,s,h,p,d,v=150,g=480,y=250,m=0,w=0,_=0,b=0,x=0,E=null,S=nr,M=null,N=ot,k=.5,A=ft(e,k);t.stream=function(n){return p&&d===n?p:p=fr(function(n){return ut({point:function(t,e){var r=n(t,e);return this.stream.point(r[0],r[1])}})}(l)(S(A(N(d=n)))))},t.preclip=function(n){return arguments.length?(S=n,E=void 0,i()):S},t.postclip=function(n){return arguments.length?(N=n,M=f=s=h=null,i()):N},t.clipAngle=function(n){return arguments.length?(S=+n?rt(E=n*Xe):(E=null,nr),i()):E*De},t.clipExtent=function(n){return arguments.length?(N=null==n?(M=f=s=h=null,ot):it(M=+n[0][0],f=+n[0][1],s=+n[1][0],h=+n[1][1]),i()):null==M?null:[[M,f],[s,h]]},t.scale=function(n){return arguments.length?(v=+n,r()):v},t.translate=function(n){return arguments.length?(g=+n[0],y=+n[1],r()):[g,y]},t.center=function(n){return arguments.length?(m=n[0]%360*Xe,w=n[1]%360*Xe,r()):[m*De,w*De]},t.rotate=function(n){return arguments.length?(_=n[0]%360*Xe,b=n[1]%360*Xe,x=n.length>2?n[2]%360*Xe:0,r()):[_*De,b*De,x*De]},t.precision=function(n){return arguments.length?(A=ft(e,k=n*n),i()):Ge(k)},t.fitExtent=function(n,e){return ct(t,n,e)},t.fitSize=function(n,e){return function(n,t,e){return ct(n,[[0,0],t],e)}(t,n,e)},t.fitWidth=function(n,e){return function(n,t,e){return lt(n,function(e){var r=+t,i=r/(e[1][0]-e[0][0]),o=(r-i*(e[1][0]+e[0][0]))/2,u=-i*e[0][1];n.scale(150*i).translate([o,u])},e)}(t,n,e)},t.fitHeight=function(n,e){return function(n,t,e){return lt(n,function(e){var r=+t,i=r/(e[1][1]-e[0][1]),o=-i*e[0][0],u=(r-i*(e[1][1]+e[0][1]))/2;n.scale(150*i).translate([o,u])},e)}(t,n,e)};return function(){return o=n.apply(this,arguments),t.invert=o.invert&&function(n){return(n=c.invert((n[0]-u)/v,(a-n[1])/v))&&[n[0]*De,n[1]*De]},r()}}(function(){return n})()}function ht(n,t){return[n,Be(We((ze+t)/2))]}function pt(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function dt(n,t){return t={exports:{}},n(t,t.exports),t.exports}var vt="http://www.w3.org/1999/xhtml",gt={svg:"http://www.w3.org/2000/svg",xhtml:vt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},yt=function(n){return function(){return this.matches(n)}};if("undefined"!=typeof document){var mt=document.documentElement;if(!mt.matches){var wt=mt.webkitMatchesSelector||mt.msMatchesSelector||mt.mozMatchesSelector||mt.oMatchesSelector;yt=function(n){return function(){return wt.call(this,n)}}}}var _t=yt,bt={},xt=null;if("undefined"!=typeof document){"onmouseenter"in document.documentElement||(bt={mouseenter:"mouseover",mouseleave:"mouseout"})}s.prototype={constructor:s,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,t){return this._parent.insertBefore(n,t)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};var Et="$";w.prototype={add:function(n){this._names.indexOf(n)<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var t=this._names.indexOf(n);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};var St=[null];P.prototype=j.prototype={constructor:P,select:function(n){"function"!=typeof n&&(n=a(n));for(var t=this._groups,e=t.length,r=new Array(e),i=0;i<e;++i)for(var o,u,l=t[i],c=l.length,f=r[i]=new Array(c),s=0;s<c;++s)(o=l[s])&&(u=n.call(o,o.__data__,s,l))&&("__data__"in o&&(u.__data__=o.__data__),f[s]=u);return new P(r,this._parents)},selectAll:function(n){"function"!=typeof n&&(n=c(n));for(var t=this._groups,e=t.length,r=[],i=[],o=0;o<e;++o)for(var u,a=t[o],l=a.length,f=0;f<l;++f)(u=a[f])&&(r.push(n.call(u,u.__data__,f,a)),i.push(u));return new P(r,i)},filter:function(n){"function"!=typeof n&&(n=_t(n));for(var t=this._groups,e=t.length,r=new Array(e),i=0;i<e;++i)for(var o,u=t[i],a=u.length,l=r[i]=[],c=0;c<a;++c)(o=u[c])&&n.call(o,o.__data__,c,u)&&l.push(o);return new P(r,this._parents)},data:function(n,t){if(!n)return v=new Array(this.size()),c=-1,this.each(function(n){v[++c]=n}),v;var e=t?p:h,r=this._parents,i=this._groups;"function"!=typeof n&&(n=function(n){return function(){return n}}(n));for(var o=i.length,u=new Array(o),a=new Array(o),l=new Array(o),c=0;c<o;++c){var f=r[c],s=i[c],d=s.length,v=n.call(f,f&&f.__data__,c,r),g=v.length,y=a[c]=new Array(g),m=u[c]=new Array(g);e(f,s,y,m,l[c]=new Array(d),v,t);for(var w,_,b=0,x=0;b<g;++b)if(w=y[b]){for(b>=x&&(x=b+1);!(_=m[x])&&++x<g;);w._next=_||null}}return u=new P(u,r),u._enter=a,u._exit=l,u},enter:function(){return new P(this._enter||this._groups.map(f),this._parents)},exit:function(){return new P(this._exit||this._groups.map(f),this._parents)},merge:function(n){for(var t=this._groups,e=n._groups,r=t.length,i=e.length,o=Math.min(r,i),u=new Array(r),a=0;a<o;++a)for(var l,c=t[a],f=e[a],s=c.length,h=u[a]=new Array(s),p=0;p<s;++p)(l=c[p]||f[p])&&(h[p]=l);for(;a<r;++a)u[a]=t[a];return new P(u,this._parents)},order:function(){for(var n=this._groups,t=-1,e=n.length;++t<e;)for(var r,i=n[t],o=i.length-1,u=i[o];--o>=0;)(r=i[o])&&(u&&u!==r.nextSibling&&u.parentNode.insertBefore(r,u),u=r);return this},sort:function(n){function t(t,e){return t&&e?n(t.__data__,e.__data__):!t-!e}n||(n=d);for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o){for(var u,a=e[o],l=a.length,c=i[o]=new Array(l),f=0;f<l;++f)(u=a[f])&&(c[f]=u);c.sort(t)}return new P(i,this._parents).order()},call:function(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this},nodes:function(){var n=new Array(this.size()),t=-1;return this.each(function(){n[++t]=this}),n},node:function(){for(var n=this._groups,t=0,e=n.length;t<e;++t)for(var r=n[t],i=0,o=r.length;i<o;++i){var u=r[i];if(u)return u}return null},size:function(){var n=0;return this.each(function(){++n}),n},empty:function(){return!this.node()},each:function(n){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var i,o=t[e],u=0,a=o.length;u<a;++u)(i=o[u])&&n.call(i,i.__data__,u,o);return this},attr:function(t,e){var r=n(t);if(arguments.length<2){var i=this.node();return r.local?i.getAttributeNS(r.space,r.local):i.getAttribute(r)}return this.each((null==e?r.local?function(n){return function(){this.removeAttributeNS(n.space,n.local)}}:function(n){return function(){this.removeAttribute(n)}}:"function"==typeof e?r.local?function(n,t){return function(){var e=t.apply(this,arguments);null==e?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,e)}}:function(n,t){return function(){var e=t.apply(this,arguments);null==e?this.removeAttribute(n):this.setAttribute(n,e)}}:r.local?function(n,t){return function(){this.setAttributeNS(n.space,n.local,t)}}:function(n,t){return function(){this.setAttribute(n,t)}})(r,e))},style:function(n,t,e){return arguments.length>1?this.each((null==t?function(n){return function(){this.style.removeProperty(n)}}:"function"==typeof t?function(n,t,e){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(n):this.style.setProperty(n,r,e)}}:function(n,t,e){return function(){this.style.setProperty(n,t,e)}})(n,t,null==e?"":e)):g(this.node(),n)},property:function(n,t){return arguments.length>1?this.each((null==t?function(n){return function(){delete this[n]}}:"function"==typeof t?function(n,t){return function(){var e=t.apply(this,arguments);null==e?delete this[n]:this[n]=e}}:function(n,t){return function(){this[n]=t}})(n,t)):this.node()[n]},classed:function(n,t){var e=y(n+"");if(arguments.length<2){for(var r=m(this.node()),i=-1,o=e.length;++i<o;)if(!r.contains(e[i]))return!1;return!0}return this.each(("function"==typeof t?function(n,t){return function(){(t.apply(this,arguments)?_:b)(this,n)}}:t?function(n){return function(){_(this,n)}}:function(n){return function(){b(this,n)}})(e,t))},text:function(n){return arguments.length?this.each(null==n?x:("function"==typeof n?function(n){return function(){var t=n.apply(this,arguments);this.textContent=null==t?"":t}}:function(n){return function(){this.textContent=n}})(n)):this.node().textContent},html:function(n){return arguments.length?this.each(null==n?E:("function"==typeof n?function(n){return function(){var t=n.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(n){return function(){this.innerHTML=n}})(n)):this.node().innerHTML},raise:function(){return this.each(S)},lower:function(){return this.each(M)},append:function(n){var e="function"==typeof n?n:t(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(n,e){var r="function"==typeof n?n:t(n),i=null==e?N:"function"==typeof e?e:a(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),i.apply(this,arguments)||null)})},remove:function(){return this.each(k)},datum:function(n){return arguments.length?this.property("__data__",n):this.node().__data__},on:function(n,t,e){var r,u,a=function(n){return n.trim().split(/^|\s+/).map(function(n){var t="",e=n.indexOf(".");return e>=0&&(t=n.slice(e+1),n=n.slice(0,e)),{type:n,name:t}})}(n+""),l=a.length;if(!(arguments.length<2)){for(c=t?o:i,null==e&&(e=!1),r=0;r<l;++r)this.each(c(a[r],t,e));return this}var c=this.node().__on;if(c)for(var f,s=0,h=c.length;s<h;++s)for(r=0,f=c[s];r<l;++r)if((u=a[r]).type===f.type&&u.name===f.name)return f.value},dispatch:function(n,t){return this.each(("function"==typeof t?function(n,t){return function(){return A(this,n,t.apply(this,arguments))}}:function(n,t){return function(){return A(this,n,t)}})(n,t))}};var Mt={value:function(){}};q.prototype=C.prototype={constructor:q,on:function(n,t){var e,r=this._,i=function(n,t){return n.trim().split(/^|\s+/).map(function(n){var e="",r=n.indexOf(".");if(r>=0&&(e=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:e}})}(n+"",r),o=-1,u=i.length;{if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++o<u;)if(e=(n=i[o]).type)r[e]=T(r[e],n.name,t);else if(null==t)for(e in r)r[e]=T(r[e],n.name,null);return this}for(;++o<u;)if((e=(n=i[o]).type)&&(e=function(n,t){for(var e,r=0,i=n.length;r<i;++r)if((e=n[r]).name===t)return e.value}(r[e],n.name)))return e}},copy:function(){var n={},t=this._;for(var e in t)n[e]=t[e].slice();return new q(n)},call:function(n,t){if((e=arguments.length-2)>0)for(var e,r,i=new Array(e),o=0;o<e;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(o=0,e=(r=this._[n]).length;o<e;++o)r[o].value.apply(t,i)},apply:function(n,t,e){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var r=this._[n],i=0,o=r.length;i<o;++i)r[i].value.apply(t,e)}};var Nt,kt,At=0,Pt=0,jt=0,Ot=1e3,Ct=0,qt=0,Tt=0,It="object"==typeof performance&&performance.now?performance:Date,Lt="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};z.prototype=R.prototype={constructor:z,restart:function(n,t,e){if("function"!=typeof n)throw new TypeError("callback is not a function");e=(null==e?I():+e)+(null==t?0:+t),this._next||kt===this||(kt?kt._next=this:Nt=this,kt=this),this._call=n,this._time=e,X()},stop:function(){this._call&&(this._call=null,this._time=1/0,X())}};var zt=C("start","end","interrupt"),Rt=[],Ft=0,Dt=1,Xt=2,Vt=3,Ht=4,Yt=5,$t=6,Ut="\\s*([+-]?\\d+)\\s*",Bt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Jt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Gt=/^#([0-9a-f]{3})$/,Wt=/^#([0-9a-f]{6})$/,Kt=new RegExp("^rgb\\("+[Ut,Ut,Ut]+"\\)$"),Qt=new RegExp("^rgb\\("+[Jt,Jt,Jt]+"\\)$"),Zt=new RegExp("^rgba\\("+[Ut,Ut,Ut,Bt]+"\\)$"),ne=new RegExp("^rgba\\("+[Jt,Jt,Jt,Bt]+"\\)$"),te=new RegExp("^hsl\\("+[Bt,Jt,Jt]+"\\)$"),ee=new RegExp("^hsla\\("+[Bt,Jt,Jt,Bt]+"\\)$"),re={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};B(G,W,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),B(tn,nn,J(G,{brighter:function(n){return n=null==n?1/.7:Math.pow(1/.7,n),new tn(this.r*n,this.g*n,this.b*n,this.opacity)},darker:function(n){return n=null==n?.7:Math.pow(.7,n),new tn(this.r*n,this.g*n,this.b*n,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var n=this.opacity;return(1===(n=isNaN(n)?1:Math.max(0,Math.min(1,n)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===n?")":", "+n+")")}})),B(rn,function(n,t,e,r){return 1===arguments.length?function(n){if(n instanceof rn)return new rn(n.h,n.s,n.l,n.opacity);if(n instanceof G||(n=W(n)),!n)return new rn;if(n instanceof rn)return n;var t=(n=n.rgb()).r/255,e=n.g/255,r=n.b/255,i=Math.min(t,e,r),o=Math.max(t,e,r),u=NaN,a=o-i,l=(o+i)/2;return a?(u=t===o?(e-r)/a+6*(e<r):e===o?(r-t)/a+2:(t-e)/a+4,a/=l<.5?o+i:2-o-i,u*=60):a=l>0&&l<1?0:u,new rn(u,a,l,n.opacity)}(n):new rn(n,t,e,null==r?1:r)},J(G,{brighter:function(n){return n=null==n?1/.7:Math.pow(1/.7,n),new rn(this.h,this.s,this.l*n,this.opacity)},darker:function(n){return n=null==n?.7:Math.pow(.7,n),new rn(this.h,this.s,this.l*n,this.opacity)},rgb:function(){var n=this.h%360+360*(this.h<0),t=isNaN(n)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*t,i=2*e-r;return new tn(on(n>=240?n-240:n+120,i,r),on(n,i,r),on(n<120?n+240:n-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var ie=Math.PI/180,oe=180/Math.PI,ue=.95047,ae=1,le=1.08883,ce=4/29,fe=6/29,se=3*fe*fe,he=fe*fe*fe;B(an,function(n,t,e,r){return 1===arguments.length?un(n):new an(n,t,e,null==r?1:r)},J(G,{brighter:function(n){return new an(this.l+18*(null==n?1:n),this.a,this.b,this.opacity)},darker:function(n){return new an(this.l-18*(null==n?1:n),this.a,this.b,this.opacity)},rgb:function(){var n=(this.l+16)/116,t=isNaN(this.a)?n:n+this.a/500,e=isNaN(this.b)?n:n-this.b/200;return n=ae*cn(n),t=ue*cn(t),e=le*cn(e),new tn(fn(3.2404542*t-1.5371385*n-.4985314*e),fn(-.969266*t+1.8760108*n+.041556*e),fn(.0556434*t-.2040259*n+1.0572252*e),this.opacity)}})),B(hn,function(n,t,e,r){return 1===arguments.length?function(n){if(n instanceof hn)return new hn(n.h,n.c,n.l,n.opacity);n instanceof an||(n=un(n));var t=Math.atan2(n.b,n.a)*oe;return new hn(t<0?t+360:t,Math.sqrt(n.a*n.a+n.b*n.b),n.l,n.opacity)}(n):new hn(n,t,e,null==r?1:r)},J(G,{brighter:function(n){return new hn(this.h,this.c,this.l+18*(null==n?1:n),this.opacity)},darker:function(n){return new hn(this.h,this.c,this.l-18*(null==n?1:n),this.opacity)},rgb:function(){return un(this).rgb()}}));var pe=-.29227,de=-.90649,ve=1.97294,ge=ve*de,ye=1.78277*ve,me=1.78277*pe- -.14861*de;B(pn,function(n,t,e,r){return 1===arguments.length?function(n){if(n instanceof pn)return new pn(n.h,n.s,n.l,n.opacity);n instanceof tn||(n=Z(n));var t=n.r/255,e=n.g/255,r=n.b/255,i=(me*r+ge*t-ye*e)/(me+ge-ye),o=r-i,u=(ve*(e-i)-pe*o)/de,a=Math.sqrt(u*u+o*o)/(ve*i*(1-i)),l=a?Math.atan2(u,o)*oe-120:NaN;return new pn(l<0?l+360:l,a,i,n.opacity)}(n):new pn(n,t,e,null==r?1:r)},J(G,{brighter:function(n){return n=null==n?1/.7:Math.pow(1/.7,n),new pn(this.h,this.s,this.l*n,this.opacity)},darker:function(n){return n=null==n?.7:Math.pow(.7,n),new pn(this.h,this.s,this.l*n,this.opacity)},rgb:function(){var n=isNaN(this.h)?0:(this.h+120)*ie,t=+this.l,e=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(n),i=Math.sin(n);return new tn(255*(t+e*(-.14861*r+1.78277*i)),255*(t+e*(pe*r+de*i)),255*(t+e*(ve*r)),this.opacity)}}));var we,_e,be,xe,Ee=function n(t){function e(n,t){var e=r((n=nn(n)).r,(t=nn(t)).r),i=r(n.g,t.g),o=r(n.b,t.b),u=gn(n.opacity,t.opacity);return function(t){return n.r=e(t),n.g=i(t),n.b=o(t),n.opacity=u(t),n+""}}var r=vn(t);return e.gamma=n,e}(1),Se=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Me=new RegExp(Se.source,"g"),Ne=180/Math.PI,ke={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Ae=wn(function(n){return"none"===n?ke:(we||(we=document.createElement("DIV"),_e=document.documentElement,be=document.defaultView),we.style.transform=n,n=be.getComputedStyle(_e.appendChild(we),null).getPropertyValue("transform"),_e.removeChild(we),n=n.slice(7,-1).split(","),mn(+n[0],+n[1],+n[2],+n[3],+n[4],+n[5]))},"px, ","px)","deg)"),Pe=wn(function(n){return null==n?ke:(xe||(xe=document.createElementNS("http://www.w3.org/2000/svg","g")),xe.setAttribute("transform",n),(n=xe.transform.baseVal.consolidate())?(n=n.matrix,mn(n.a,n.b,n.c,n.d,n.e,n.f)):ke)},", ",")",")"),je=(Math.SQRT2,j.prototype.constructor),Oe=0,Ce=j.prototype;xn.prototype=function(n){return j().transition(n)}.prototype={constructor:xn,select:function(n){var t=this._name,e=this._id;"function"!=typeof n&&(n=a(n));for(var r=this._groups,i=r.length,o=new Array(i),u=0;u<i;++u)for(var l,c,f=r[u],s=f.length,h=o[u]=new Array(s),p=0;p<s;++p)(l=f[p])&&(c=n.call(l,l.__data__,p,f))&&("__data__"in l&&(c.__data__=l.__data__),h[p]=c,H(h[p],t,e,p,h,U(l,e)));return new xn(o,this._parents,t,e)},selectAll:function(n){var t=this._name,e=this._id;"function"!=typeof n&&(n=c(n));for(var r=this._groups,i=r.length,o=[],u=[],a=0;a<i;++a)for(var l,f=r[a],s=f.length,h=0;h<s;++h)if(l=f[h]){for(var p,d=n.call(l,l.__data__,h,f),v=U(l,e),g=0,y=d.length;g<y;++g)(p=d[g])&&H(p,t,e,g,d,v);o.push(d),u.push(l)}return new xn(o,u,t,e)},filter:function(n){"function"!=typeof n&&(n=_t(n));for(var t=this._groups,e=t.length,r=new Array(e),i=0;i<e;++i)for(var o,u=t[i],a=u.length,l=r[i]=[],c=0;c<a;++c)(o=u[c])&&n.call(o,o.__data__,c,u)&&l.push(o);return new xn(r,this._parents,this._name,this._id)},merge:function(n){if(n._id!==this._id)throw new Error;for(var t=this._groups,e=n._groups,r=t.length,i=e.length,o=Math.min(r,i),u=new Array(r),a=0;a<o;++a)for(var l,c=t[a],f=e[a],s=c.length,h=u[a]=new Array(s),p=0;p<s;++p)(l=c[p]||f[p])&&(h[p]=l);for(;a<r;++a)u[a]=t[a];return new xn(u,this._parents,this._name,this._id)},selection:function(){return new je(this._groups,this._parents)},transition:function(){for(var n=this._name,t=this._id,e=En(),r=this._groups,i=r.length,o=0;o<i;++o)for(var u,a=r[o],l=a.length,c=0;c<l;++c)if(u=a[c]){var f=U(u,t);H(u,n,e,c,a,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new xn(r,this._parents,n,e)},call:Ce.call,nodes:Ce.nodes,node:Ce.node,size:Ce.size,empty:Ce.empty,each:Ce.each,on:function(n,t){var e=this._id;return arguments.length<2?U(this.node(),e).on.on(n):this.each(function(n,t,e){var r,i,o=function(n){return(n+"").trim().split(/^|\s+/).every(function(n){var t=n.indexOf(".");return t>=0&&(n=n.slice(0,t)),!n||"start"===n})}(t)?Y:$;return function(){var u=o(this,n),a=u.on;a!==r&&(i=(r=a).copy()).on(t,e),u.on=i}}(e,n,t))},attr:function(t,e){var r=n(t),i="transform"===r?Pe:bn;return this.attrTween(t,"function"==typeof e?(r.local?function(n,t,e){var r,i,o;return function(){var u,a=e(this);if(null!=a)return(u=this.getAttributeNS(n.space,n.local))===a?null:u===r&&a===i?o:o=t(r=u,i=a);this.removeAttributeNS(n.space,n.local)}}:function(n,t,e){var r,i,o;return function(){var u,a=e(this);if(null!=a)return(u=this.getAttribute(n))===a?null:u===r&&a===i?o:o=t(r=u,i=a);this.removeAttribute(n)}})(r,i,_n(this,"attr."+t,e)):null==e?(r.local?function(n){return function(){this.removeAttributeNS(n.space,n.local)}}:function(n){return function(){this.removeAttribute(n)}})(r):(r.local?function(n,t,e){var r,i;return function(){var o=this.getAttributeNS(n.space,n.local);return o===e?null:o===r?i:i=t(r=o,e)}}:function(n,t,e){var r,i;return function(){var o=this.getAttribute(n);return o===e?null:o===r?i:i=t(r=o,e)}})(r,i,e+""))},attrTween:function(t,e){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;var i=n(t);return this.tween(r,(i.local?function(n,t){function e(){var e=this,r=t.apply(e,arguments);return r&&function(t){e.setAttributeNS(n.space,n.local,r(t))}}return e._value=t,e}:function(n,t){function e(){var e=this,r=t.apply(e,arguments);return r&&function(t){e.setAttribute(n,r(t))}}return e._value=t,e})(i,e))},style:function(n,t,e){var r="transform"==(n+="")?Ae:bn;return null==t?this.styleTween(n,function(n,t){var e,r,i;return function(){var o=g(this,n),u=(this.style.removeProperty(n),g(this,n));return o===u?null:o===e&&u===r?i:i=t(e=o,r=u)}}(n,r)).on("end.style."+n,function(n){return function(){this.style.removeProperty(n)}}(n)):this.styleTween(n,"function"==typeof t?function(n,t,e){var r,i,o;return function(){var u=g(this,n),a=e(this);return null==a&&(this.style.removeProperty(n),a=g(this,n)),u===a?null:u===r&&a===i?o:o=t(r=u,i=a)}}(n,r,_n(this,"style."+n,t)):function(n,t,e){var r,i;return function(){var o=g(this,n);return o===e?null:o===r?i:i=t(r=o,e)}}(n,r,t+""),e)},styleTween:function(n,t,e){var r="style."+(n+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,function(n,t,e){function r(){var r=this,i=t.apply(r,arguments);return i&&function(t){r.style.setProperty(n,i(t),e)}}return r._value=t,r}(n,t,null==e?"":e))},text:function(n){return this.tween("text","function"==typeof n?function(n){return function(){var t=n(this);this.textContent=null==t?"":t}}(_n(this,"text",n)):function(n){return function(){this.textContent=n}}(null==n?"":n+""))},remove:function(){return this.on("end.remove",function(n){return function(){var t=this.parentNode;for(var e in this.__transition)if(+e!==n)return;t&&t.removeChild(this)}}(this._id))},tween:function(n,t){var e=this._id;if(n+="",arguments.length<2){for(var r,i=U(this.node(),e).tween,o=0,u=i.length;o<u;++o)if((r=i[o]).name===n)return r.value;return null}return this.each((null==t?function(n,t){var e,r;return function(){var i=$(this,n),o=i.tween;if(o!==e)for(var u=0,a=(r=e=o).length;u<a;++u)if(r[u].name===t){(r=r.slice()).splice(u,1);break}i.tween=r}}:function(n,t,e){var r,i;if("function"!=typeof e)throw new Error;return function(){var o=$(this,n),u=o.tween;if(u!==r){i=(r=u).slice();for(var a={name:t,value:e},l=0,c=i.length;l<c;++l)if(i[l].name===t){i[l]=a;break}l===c&&i.push(a)}o.tween=i}})(e,n,t))},delay:function(n){var t=this._id;return arguments.length?this.each(("function"==typeof n?function(n,t){return function(){Y(this,n).delay=+t.apply(this,arguments)}}:function(n,t){return t=+t,function(){Y(this,n).delay=t}})(t,n)):U(this.node(),t).delay},duration:function(n){var t=this._id;return arguments.length?this.each(("function"==typeof n?function(n,t){return function(){$(this,n).duration=+t.apply(this,arguments)}}:function(n,t){return t=+t,function(){$(this,n).duration=t}})(t,n)):U(this.node(),t).duration},ease:function(n){var t=this._id;return arguments.length?this.each(function(n,t){if("function"!=typeof t)throw new Error;return function(){$(this,n).ease=t}}(t,n)):U(this.node(),t).ease}};Math.PI,Math.PI;var qe={time:null,delay:0,duration:250,ease:function(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}};j.prototype.interrupt=function(n){return this.each(function(){!function(n,t){var e,r,i,o=n.__transition,u=!0;if(o){t=null==t?null:t+"";for(i in o)(e=o[i]).name===t?(r=e.state>Xt&&e.state<Yt,e.state=$t,e.timer.stop(),r&&e.on.call("interrupt",n,n.__data__,e.index,e.group),delete o[i]):u=!1;u&&delete n.__transition}}(this,n)})},j.prototype.transition=function(n){var t,e;n instanceof xn?(t=n._id,n=n._name):(t=En(),(e=qe).time=I(),n=null==n?null:n+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var u,a=r[o],l=a.length,c=0;c<l;++c)(u=a[c])&&H(u,n,t,c,a,e||Sn(u,t));return new xn(r,this._parents,n,t)},Nn.prototype={constructor:Nn,reset:function(){this.s=this.t=0},add:function(n){kn(Te,n,this.t),kn(this,Te.s,this.s),this.s?this.t+=Te.t:this.s=Te.t},valueOf:function(){return this.s}};var Te=new Nn,Ie=1e-6,Le=Math.PI,ze=Le/2,Re=Le/4,Fe=2*Le,De=180/Le,Xe=Le/180,Ve=Math.abs,He=Math.atan,Ye=Math.atan2,$e=Math.cos,Ue=Math.exp,Be=Math.log,Je=Math.sin,Ge=Math.sqrt,We=Math.tan,Ke={Feature:function(n,t){jn(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,r=-1,i=e.length;++r<i;)jn(e[r].geometry,t)}},Qe={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var e=n.coordinates,r=-1,i=e.length;++r<i;)n=e[r],t.point(n[0],n[1],n[2])},LineString:function(n,t){On(n.coordinates,t,0)},MultiLineString:function(n,t){for(var e=n.coordinates,r=-1,i=e.length;++r<i;)On(e[r],t,0)},Polygon:function(n,t){Cn(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,r=-1,i=e.length;++r<i;)Cn(e[r],t)},GeometryCollection:function(n,t){for(var e=n.geometries,r=-1,i=e.length;++r<i;)jn(e[r],t)}};Mn(),Mn(),Mn();Xn.invert=Xn;var Ze=Mn(),nr=(function(n){1===n.length&&(n=function(n){return function(t,e){return Qn(n(t),e)}}(n))}(Qn),nt(function(){return!0},function(n){var t,e=NaN,r=NaN,i=NaN;return{lineStart:function(){n.lineStart(),t=1},point:function(o,u){var a=o>0?Le:-Le,l=Ve(o-e);Ve(l-Le)<Ie?(n.point(e,r=(r+u)/2>0?ze:-ze),n.point(i,r),n.lineEnd(),n.lineStart(),n.point(a,r),n.point(o,r),t=0):i!==a&&l>=Le&&(Ve(e-i)<Ie&&(e-=i*Ie),Ve(o-a)<Ie&&(o-=a*Ie),r=function(n,t,e,r){var i,o,u=Je(n-e);return Ve(u)>Ie?He((Je(t)*(o=$e(r))*Je(e)-Je(r)*(i=$e(t))*Je(n))/(i*o*u)):(t+r)/2}(e,r,o,u),n.point(i,r),n.lineEnd(),n.lineStart(),n.point(a,r),t=0),n.point(e=o,r=u),i=a},lineEnd:function(){n.lineEnd(),e=r=NaN},clean:function(){return 2-t}}},function(n,t,e,r){var i;if(null==n)i=e*ze,r.point(-Le,i),r.point(0,i),r.point(Le,i),r.point(Le,0),r.point(Le,-i),r.point(0,-i),r.point(-Le,-i),r.point(-Le,0),r.point(-Le,i);else if(Ve(n[0]-t[0])>Ie){var o=n[0]<t[0]?Le:-Le;i=e*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])},[-Le,-ze])),tr=1e9,er=-tr,rr=(Mn(),Mn(),Mn(),1/0),ir=rr,or=-rr,ur=or,ar={point:function(n,t){n<rr&&(rr=n),n>or&&(or=n),t<ir&&(ir=t),t>ur&&(ur=t)},lineStart:Pn,lineEnd:Pn,polygonStart:Pn,polygonEnd:Pn,result:function(){var n=[[rr,ir],[or,ur]];return or=ur=-(ir=rr=1/0),n}};Mn();at.prototype={constructor:at,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var lr=16,cr=$e(30*Xe),fr=ut({point:function(n,t){this.stream.point(n*Xe,t*Xe)}});ht.invert=function(n,t){return[n,2*He(Ue(t))-ze]};var sr="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},pr=pt(dt(function(n,t){!function(n){function t(n,t){return n<t?-1:n>t?1:n>=t?0:NaN}function e(n){for(var t,e,r,i=n.length,o=-1,u=0;++o<i;)u+=n[o].length;for(e=new Array(u);--i>=0;)for(r=n[i],t=r.length;--t>=0;)e[--u]=r[t];return e}function r(n,t){var e,r=n.length,i=-1,o=0;if(null==t)for(;++i<r;)(e=+n[i])&&(o+=e);else for(;++i<r;)(e=+t(n[i],i,n))&&(o+=e);return o}function i(){return new o}function o(){this.reset()}function u(n,t,e){var r=n.s=t+e,i=r-t,o=r-i;n.t=t-o+(e-i)}function a(n){return n>1?gn:n<-1?-gn:Math.asin(n)}function l(){}function c(n,t){n&&Pn.hasOwnProperty(n.type)&&Pn[n.type](n,t)}function f(n,t,e){var r,i=-1,o=n.length-e;for(t.lineStart();++i<o;)r=n[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function s(n,t){var e=-1,r=n.length;for(t.polygonStart();++e<r;)f(n[e],t,1);t.polygonEnd()}function h(n,t){n&&An.hasOwnProperty(n.type)?An[n.type](n,t):c(n,t)}function p(n){return[En(n[1],n[0]),a(n[2])]}function d(n){var t=n[0],e=n[1],r=Sn(e);return[r*Sn(t),r*Mn(t),Mn(e)]}function v(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function g(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function y(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function m(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function w(n){var t=kn(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function _(n,t){function e(e,r){return e=n(e,r),t(e[0],e[1])}return n.invert&&t.invert&&(e.invert=function(e,r){return(e=t.invert(e,r))&&n.invert(e[0],e[1])}),e}function b(n,t){return[n>vn?n-mn:n<-vn?n+mn:n,t]}function x(n){return function(t,e){return t+=n,[t>vn?t-mn:t<-vn?t+mn:t,e]}}function E(n){var t=x(n);return t.invert=x(-n),t}function S(n,t){function e(n,t){var e=Sn(t),l=Sn(n)*e,c=Mn(n)*e,f=Mn(t),s=f*r+l*i;return[En(c*o-s*u,l*r-f*i),a(s*o+c*u)]}var r=Sn(n),i=Mn(n),o=Sn(t),u=Mn(t);return e.invert=function(n,t){var e=Sn(t),l=Sn(n)*e,c=Mn(n)*e,f=Mn(t),s=f*o-c*u;return[En(c*o+f*u,l*r+s*i),a(s*r-l*i)]},e}function M(n,t){(t=d(t))[0]-=n,w(t);var e=function(n){return n>1?0:n<-1?vn:Math.acos(n)}(-t[1]);return((-t[2]<0?-e:e)+mn-dn)%mn}function N(){var n,t=[];return{point:function(t,e){n.push([t,e])},lineStart:function(){t.push(n=[])},lineEnd:l,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var e=t;return t=[],n=null,e}}}function k(n,t){return bn(n[0]-t[0])<dn&&bn(n[1]-t[1])<dn}function A(n,t,e,r){this.x=n,this.z=t,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function P(n,t,e,r,i){var o,u,a=[],l=[];if(n.forEach(function(n){if(!((t=n.length-1)<=0)){var t,e,r=n[0],u=n[t];if(k(r,u)){for(i.lineStart(),o=0;o<t;++o)i.point((r=n[o])[0],r[1]);i.lineEnd()}else a.push(e=new A(r,n,null,!0)),l.push(e.o=new A(r,null,e,!1)),a.push(e=new A(u,n,null,!1)),l.push(e.o=new A(u,null,e,!0))}}),a.length){for(l.sort(t),j(a),j(l),o=0,u=l.length;o<u;++o)l[o].e=e=!e;for(var c,f,s=a[0];;){for(var h=s,p=!0;h.v;)if((h=h.n)===s)return;c=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(o=0,u=c.length;o<u;++o)i.point((f=c[o])[0],f[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(p)for(c=h.p.z,o=c.length-1;o>=0;--o)i.point((f=c[o])[0],f[1]);else r(h.x,h.p.x,-1,i);h=h.p}h=h.o,c=h.z,p=!p}while(!h.v);i.lineEnd()}}}function j(n){if(t=n.length){for(var t,e,r=0,i=n[0];++r<t;)i.n=e=n[r],e.p=i,i=e;i.n=e=n[0],e.p=i}}function O(n,t,r,i){return function(o){function u(t,e){n(t,e)&&o.point(t,e)}function l(n,t){_.point(n,t)}function c(){S.point=l,_.lineStart()}function f(){S.point=u,_.lineEnd()}function s(n,t){m.push([n,t]),x.point(n,t)}function h(){x.lineStart(),m=[]}function p(){s(m[0][0],m[0][1]),x.lineEnd();var n,t,e,r,i=x.clean(),u=b.result(),a=u.length;if(m.pop(),v.push(m),m=null,a)if(1&i){if(e=u[0],(t=e.length-1)>0){for(E||(o.polygonStart(),E=!0),o.lineStart(),n=0;n<t;++n)o.point((r=e[n])[0],r[1]);o.lineEnd()}}else a>1&&2&i&&u.push(u.pop().concat(u.shift())),y.push(u.filter(C))}var v,y,m,_=t(o),b=N(),x=t(b),E=!1,S={point:u,lineStart:c,lineEnd:f,polygonStart:function(){S.point=s,S.lineStart=h,S.lineEnd=p,y=[],v=[]},polygonEnd:function(){S.point=u,S.lineStart=c,S.lineEnd=f,y=e(y);var n=function(n,t){var e=t[0],r=t[1],i=[Mn(e),-Sn(e),0],o=0,u=0;jn.reset();for(var l=0,c=n.length;l<c;++l)if(s=(f=n[l]).length)for(var f,s,h=f[s-1],p=h[0],v=h[1]/2+yn,y=Mn(v),m=Sn(v),_=0;_<s;++_,p=x,y=S,m=M,h=b){var b=f[_],x=b[0],E=b[1]/2+yn,S=Mn(E),M=Sn(E),N=x-p,k=N>=0?1:-1,A=k*N,P=A>vn,j=y*S;if(jn.add(En(j*k*Mn(A),m*M+j*Sn(A))),o+=P?N+k*mn:N,P^p>=e^x>=e){var O=g(d(h),d(b));w(O);var C=g(i,O);w(C);var q=(P^N>=0?-1:1)*a(C[2]);(r>q||r===q&&(O[0]||O[1]))&&(u+=P^N>=0?1:-1)}}return(o<-dn||o<dn&&jn<-dn)^1&u}(v,i);y.length?(E||(o.polygonStart(),E=!0),P(y,q,n,r,o)):n&&(E||(o.polygonStart(),E=!0),o.lineStart(),r(null,null,1,o),o.lineEnd()),E&&(o.polygonEnd(),E=!1),y=v=null},sphere:function(){o.polygonStart(),o.lineStart(),r(null,null,1,o),o.lineEnd(),o.polygonEnd()}};return S}}function C(n){return n.length>1}function q(n,t){return((n=n.x)[0]<0?n[1]-gn-dn:gn-n[1])-((t=t.x)[0]<0?t[1]-gn-dn:gn-t[1])}function T(n){function t(n,t){return Sn(n)*Sn(t)>i}function e(n,t,e){var r=d(n),o=d(t),u=[1,0,0],a=g(r,o),l=v(a,a),c=a[0],f=l-c*c;if(!f)return!e&&n;var s=i*l/f,h=-i*c/f,w=g(u,a),_=m(u,s),b=m(a,h);y(_,b);var x=w,E=v(_,x),S=v(x,x),M=E*E-S*(v(_,_)-1);if(!(M<0)){var N=kn(M),k=m(x,(-E-N)/S);if(y(k,_),k=p(k),!e)return k;var A,P=n[0],j=t[0],O=n[1],C=t[1];j<P&&(A=P,P=j,j=A);var q=j-P,T=bn(q-vn)<dn,I=T||q<dn;if(!T&&C<O&&(A=O,O=C,C=A),I?T?O+C>0^k[1]<(bn(k[0]-P)<dn?O:C):O<=k[1]&&k[1]<=C:q>vn^(P<=k[0]&&k[0]<=j)){var L=m(x,(-E+N)/S);return y(L,_),[k,p(L)]}}}function r(t,e){var r=u?n:vn-n,i=0;return t<-r?i|=1:t>r&&(i|=2),e<-r?i|=4:e>r&&(i|=8),i}var i=Sn(n),o=6*_n,u=i>0,a=bn(i)>dn;return O(t,function(n){var i,o,l,c,f;return{lineStart:function(){c=l=!1,f=1},point:function(s,h){var p,d=[s,h],v=t(s,h),g=u?v?0:r(s,h):v?r(s+(s<0?vn:-vn),h):0;if(!i&&(c=l=v)&&n.lineStart(),v!==l&&(!(p=e(i,d))||k(i,p)||k(d,p))&&(d[0]+=dn,d[1]+=dn,v=t(d[0],d[1])),v!==l)f=0,v?(n.lineStart(),p=e(d,i),n.point(p[0],p[1])):(p=e(i,d),n.point(p[0],p[1]),n.lineEnd()),i=p;else if(a&&i&&u^v){var y;g&o||!(y=e(d,i,!0))||(f=0,u?(n.lineStart(),n.point(y[0][0],y[0][1]),n.point(y[1][0],y[1][1]),n.lineEnd()):(n.point(y[1][0],y[1][1]),n.lineEnd(),n.lineStart(),n.point(y[0][0],y[0][1])))}!v||i&&k(i,d)||n.point(d[0],d[1]),i=d,l=v,o=g},lineEnd:function(){l&&n.lineEnd(),i=null},clean:function(){return f|(c&&l)<<1}}},function(t,e,r,i){!function(n,t,e,r,i,o){if(!e)return;var u=Sn(t),a=Mn(t),l=r*e;null==i?(i=t+r*mn,o=t-l/2):(i=M(u,i),o=M(u,o),(r>0?i<o:i>o)&&(i+=r*mn));for(var c,f=i;r>0?f>o:f<o;f-=l)c=p([u,-a*Sn(f),-a*Mn(f)]),n.point(c[0],c[1])}(i,n,o,r,t,e)},u?[0,-n]:[-vn,n-vn])}function I(n,t,r,i){function o(e,o){return n<=e&&e<=r&&t<=o&&o<=i}function u(e,o,u,l){var f=0,s=0;if(null==e||(f=a(e,u))!==(s=a(o,u))||c(e,o)<0^u>0)do{l.point(0===f||3===f?n:r,f>1?i:t)}while((f=(f+u+4)%4)!==s);else l.point(o[0],o[1])}function a(e,i){return bn(e[0]-n)<dn?i>0?0:3:bn(e[0]-r)<dn?i>0?2:1:bn(e[1]-t)<dn?i>0?1:0:i>0?3:2}function l(n,t){return c(n.x,t.x)}function c(n,t){var e=a(n,1),r=a(t,1);return e!==r?e-r:0===e?t[1]-n[1]:1===e?n[0]-t[0]:2===e?n[1]-t[1]:t[0]-n[0]}return function(a){function c(n,t){o(n,t)&&x.point(n,t)}function f(e,u){var a=o(e,u);if(h&&p.push([e,u]),_)d=e,v=u,g=a,_=!1,a&&(x.lineStart(),x.point(e,u));else if(a&&w)x.point(e,u);else{var l=[y=Math.max(qn,Math.min(Cn,y)),m=Math.max(qn,Math.min(Cn,m))],c=[e=Math.max(qn,Math.min(Cn,e)),u=Math.max(qn,Math.min(Cn,u))];!function(n,t,e,r,i,o){var u,a=n[0],l=n[1],c=t[0],f=t[1],s=0,h=1,p=c-a,d=f-l;if(u=e-a,!p&&u>0)return;if(u/=p,p<0){if(u<s)return;u<h&&(h=u)}else if(p>0){if(u>h)return;u>s&&(s=u)}if(u=i-a,!p&&u<0)return;if(u/=p,p<0){if(u>h)return;u>s&&(s=u)}else if(p>0){if(u<s)return;u<h&&(h=u)}if(u=r-l,!d&&u>0)return;if(u/=d,d<0){if(u<s)return;u<h&&(h=u)}else if(d>0){if(u>h)return;u>s&&(s=u)}if(u=o-l,!d&&u<0)return;if(u/=d,d<0){if(u>h)return;u>s&&(s=u)}else if(d>0){if(u<s)return;u<h&&(h=u)}s>0&&(n[0]=a+s*p,n[1]=l+s*d);h<1&&(t[0]=a+h*p,t[1]=l+h*d);return!0}(l,c,n,t,r,i)?a&&(x.lineStart(),x.point(e,u),b=!1):(w||(x.lineStart(),x.point(l[0],l[1])),x.point(c[0],c[1]),a||x.lineEnd(),b=!1)}y=e,m=u,w=a}var s,h,p,d,v,g,y,m,w,_,b,x=a,E=N(),S={point:c,lineStart:function(){S.point=f,h&&h.push(p=[]);_=!0,w=!1,y=m=NaN},lineEnd:function(){s&&(f(d,v),g&&w&&E.rejoin(),s.push(E.result()));S.point=c,w&&x.lineEnd()},polygonStart:function(){x=E,s=[],h=[],b=!0},polygonEnd:function(){var t=function(){for(var t=0,e=0,r=h.length;e<r;++e)for(var o,u,a=h[e],l=1,c=a.length,f=a[0],s=f[0],p=f[1];l<c;++l)o=s,u=p,f=a[l],s=f[0],p=f[1],u<=i?p>i&&(s-o)*(i-u)>(p-u)*(n-o)&&++t:p<=i&&(s-o)*(i-u)<(p-u)*(n-o)&&--t;return t}(),r=b&&t,o=(s=e(s)).length;(r||o)&&(a.polygonStart(),r&&(a.lineStart(),u(null,null,1,a),a.lineEnd()),o&&P(s,l,t,u,a),a.polygonEnd());x=a,s=h=p=null}};return S}}function L(n){return n}function z(){Dn.point=R}function R(n,t){Dn.point=F,Tn=Ln=n,In=zn=t}function F(n,t){Fn.add(zn*n-Ln*t),Ln=n,zn=t}function D(){F(Tn,In)}function X(n,t){Wn+=n,Kn+=t,++Qn}function V(){ot.point=H}function H(n,t){ot.point=Y,X(Jn=n,Gn=t)}function Y(n,t){var e=n-Jn,r=t-Gn,i=kn(e*e+r*r);Zn+=i*(Jn+n)/2,nt+=i*(Gn+t)/2,tt+=i,X(Jn=n,Gn=t)}function $(){ot.point=X}function U(){ot.point=J}function B(){G(Un,Bn)}function J(n,t){ot.point=G,X(Un=Jn=n,Bn=Gn=t)}function G(n,t){var e=n-Jn,r=t-Gn,i=kn(e*e+r*r);Zn+=i*(Jn+n)/2,nt+=i*(Gn+t)/2,tt+=i,et+=(i=Gn*n-Jn*t)*(Jn+n),rt+=i*(Gn+t),it+=3*i,X(Jn=n,Gn=t)}function W(n){this._context=n}function K(n,t){ht.point=Q,at=ct=n,lt=ft=t}function Q(n,t){ct-=n,ft-=t,st.add(kn(ct*ct+ft*ft)),ct=n,ft=t}function Z(){this._string=[]}function nn(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+2*n+"z"}function tn(n,t){function e(n){return n&&("function"==typeof o&&i.pointRadius(+o.apply(this,arguments)),h(n,r(i))),i.result()}var r,i,o=4.5;return e.area=function(n){return h(n,r(Dn)),Dn.result()},e.measure=function(n){return h(n,r(ht)),ht.result()},e.bounds=function(n){return h(n,r($n)),$n.result()},e.centroid=function(n){return h(n,r(ot)),ot.result()},e.projection=function(t){return arguments.length?(r=null==t?(n=null,L):(n=t).stream,e):n},e.context=function(n){return arguments.length?(i=null==n?(t=null,new Z):new W(t=n),"function"!=typeof o&&i.pointRadius(o),e):t},e.pointRadius=function(n){return arguments.length?(o="function"==typeof n?n:(i.pointRadius(+n),+n),e):o},e.projection(n).context(t)}function en(n){return function(t){var e=new rn;for(var r in n)e[r]=n[r];return e.stream=t,e}}function rn(){}function on(n,t,e){var r=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),null!=r&&n.clipExtent(null),h(e,n.stream($n)),t($n.result()),null!=r&&n.clipExtent(r),n}function un(n,t,e){return on(n,function(e){var r=t[1][0]-t[0][0],i=t[1][1]-t[0][1],o=Math.min(r/(e[1][0]-e[0][0]),i/(e[1][1]-e[0][1])),u=+t[0][0]+(r-o*(e[1][0]+e[0][0]))/2,a=+t[0][1]+(i-o*(e[1][1]+e[0][1]))/2;n.scale(150*o).translate([u,a])},e)}function an(n,t){return+t?function(n,t){function e(r,i,o,u,l,c,f,s,h,p,d,v,g,y){var m=f-r,w=s-i,_=m*m+w*w;if(_>4*t&&g--){var b=u+p,x=l+d,E=c+v,S=kn(b*b+x*x+E*E),M=a(E/=S),N=bn(bn(E)-1)<dn||bn(o-h)<dn?(o+h)/2:En(x,b),k=n(N,M),A=k[0],P=k[1],j=A-r,O=P-i,C=w*j-m*O;(C*C/_>t||bn((m*j+w*O)/_-.5)>.3||u*p+l*d+c*v<dt)&&(e(r,i,o,u,l,c,A,P,N,b/=S,x/=S,E,g,y),y.point(A,P),e(A,P,N,b,x,E,f,s,h,p,d,v,g,y))}}return function(t){function r(e,r){e=n(e,r),t.point(e[0],e[1])}function i(){m=NaN,E.point=o,t.lineStart()}function o(r,i){var o=d([r,i]),u=n(r,i);e(m,w,y,_,b,x,m=u[0],w=u[1],y=r,_=o[0],b=o[1],x=o[2],pt,t),t.point(m,w)}function u(){E.point=r,t.lineEnd()}function a(){i(),E.point=l,E.lineEnd=c}function l(n,t){o(f=n,t),s=m,h=w,p=_,v=b,g=x,E.point=o}function c(){e(m,w,y,_,b,x,s,h,f,p,v,g,pt,t),E.lineEnd=u,u()}var f,s,h,p,v,g,y,m,w,_,b,x,E={point:r,lineStart:i,lineEnd:u,polygonStart:function(){t.polygonStart(),E.lineStart=a},polygonEnd:function(){t.polygonEnd(),E.lineStart=i}};return E}}(n,t):function(n){return en({point:function(t,e){t=n(t,e),this.stream.point(t[0],t[1])}})}(n)}function ln(n){function t(n){return n=c(n[0]*_n,n[1]*_n),[n[0]*v+u,a-n[1]*v]}function e(n,t){return n=o(n,t),[n[0]*v+u,a-n[1]*v]}function r(){c=_(l=function(n,t,e){return(n%=mn)?t||e?_(E(n),S(t,e)):E(n):t||e?S(t,e):b}(x,M,N),o);var n=o(m,w);return u=g-n[0]*v,a=y+n[1]*v,i()}function i(){return p=d=null,t}var o,u,a,l,c,f,s,h,p,d,v=150,g=480,y=250,m=0,w=0,x=0,M=0,N=0,k=null,A=On,P=null,j=L,O=.5,C=an(e,O);return t.stream=function(n){return p&&d===n?p:p=vt(function(n){return en({point:function(t,e){var r=n(t,e);return this.stream.point(r[0],r[1])}})}(l)(A(C(j(d=n)))))},t.preclip=function(n){return arguments.length?(A=n,k=void 0,i()):A},t.postclip=function(n){return arguments.length?(j=n,P=f=s=h=null,i()):j},t.clipAngle=function(n){return arguments.length?(A=+n?T(k=n*_n):(k=null,On),i()):k*wn},t.clipExtent=function(n){return arguments.length?(j=null==n?(P=f=s=h=null,L):I(P=+n[0][0],f=+n[0][1],s=+n[1][0],h=+n[1][1]),i()):null==P?null:[[P,f],[s,h]]},t.scale=function(n){return arguments.length?(v=+n,r()):v},t.translate=function(n){return arguments.length?(g=+n[0],y=+n[1],r()):[g,y]},t.center=function(n){return arguments.length?(m=n[0]%360*_n,w=n[1]%360*_n,r()):[m*wn,w*wn]},t.rotate=function(n){return arguments.length?(x=n[0]%360*_n,M=n[1]%360*_n,N=n.length>2?n[2]%360*_n:0,r()):[x*wn,M*wn,N*wn]},t.precision=function(n){return arguments.length?(C=an(e,O=n*n),i()):kn(O)},t.fitExtent=function(n,e){return un(t,n,e)},t.fitSize=function(n,e){return function(n,t,e){return un(n,[[0,0],t],e)}(t,n,e)},t.fitWidth=function(n,e){return function(n,t,e){return on(n,function(e){var r=+t,i=r/(e[1][0]-e[0][0]),o=(r-i*(e[1][0]+e[0][0]))/2,u=-i*e[0][1];n.scale(150*i).translate([o,u])},e)}(t,n,e)},t.fitHeight=function(n,e){return function(n,t,e){return on(n,function(e){var r=+t,i=r/(e[1][1]-e[0][1]),o=-i*e[0][0],u=(r-i*(e[1][1]+e[0][1]))/2;n.scale(150*i).translate([o,u])},e)}(t,n,e)},function(){return o=n.apply(this,arguments),t.invert=o.invert&&function(n){return(n=c.invert((n[0]-u)/v,(a-n[1])/v))&&[n[0]*wn,n[1]*wn]},r()}}function cn(n,t){function e(n,t){var e=kn(o-2*i*Mn(t))/i;return[e*Mn(n*=i),u-e*Sn(n)]}var r=Mn(n),i=(r+Mn(t))/2;if(bn(i)<dn)return function(n){function t(n,t){return[n*e,Mn(t)/e]}var e=Sn(n);return t.invert=function(n,t){return[n/e,a(t*e)]},t}(n);var o=1+r*(2*i-r),u=kn(o)/i;return e.invert=function(n,t){var e=u-t;return[En(n,bn(e))/i*Nn(e),a((o-(n*n+e*e)*i*i)/(2*i))]},e}function fn(){return function(n){var t=0,e=vn/3,r=ln(n),i=r(t,e);return i.parallels=function(n){return arguments.length?r(t=n[0]*_n,e=n[1]*_n):[t*wn,e*wn]},i}(cn).scale(155.424).center([0,33.6442])}function sn(n){return n}function hn(n,t){var e=t.id,r=t.bbox,i=null==t.properties?{}:t.properties,o=function(n,t){function e(n,t){t.length&&t.pop();for(var e=c[n<0?~n:n],r=0,i=e.length;r<i;++r)t.push(l(e[r],r));n<0&&function(n,t){var e,r=n.length,i=r-t;for(;i<--r;)e=n[i],n[i++]=n[r],n[r]=e}(t,i)}function r(n){return l(n)}function i(n){for(var t=[],r=0,i=n.length;r<i;++r)e(n[r],t);return t.length<2&&t.push(t[0]),t}function o(n){for(var t=i(n);t.length<4;)t.push(t[0]);return t}function u(n){return n.map(o)}function a(n){var t,e=n.type;switch(e){case"GeometryCollection":return{type:e,geometries:n.geometries.map(a)};case"Point":t=r(n.coordinates);break;case"MultiPoint":t=n.coordinates.map(r);break;case"LineString":t=i(n.arcs);break;case"MultiLineString":t=n.arcs.map(i);break;case"Polygon":t=u(n.arcs);break;case"MultiPolygon":t=n.arcs.map(u);break;default:return null}return{type:e,coordinates:t}}var l=function(n){if(null==n)return sn;var t,e,r=n.scale[0],i=n.scale[1],o=n.translate[0],u=n.translate[1];return function(n,a){a||(t=e=0);var l=2,c=n.length,f=new Array(c);for(f[0]=(t+=n[0])*r+o,f[1]=(e+=n[1])*i+u;l<c;)f[l]=n[l],++l;return f}}(n.transform),c=n.arcs;return a(t)}(n,t);return null==e&&null==r?{type:"Feature",properties:i,geometry:o}:null==r?{type:"Feature",id:e,properties:i,geometry:o}:{type:"Feature",id:e,bbox:r,properties:i,geometry:o}}!function(n){1===n.length&&(n=function(n){return function(e,r){return t(n(e),r)}}(n))}(t);o.prototype={constructor:o,reset:function(){this.s=this.t=0},add:function(n){u(pn,n,this.t),u(this,pn.s,this.s),this.s?this.t+=pn.t:this.s=pn.t},valueOf:function(){return this.s}};var pn=new o;var dn=1e-6,vn=Math.PI,gn=vn/2,yn=vn/4,mn=2*vn,wn=180/vn,_n=vn/180,bn=Math.abs,xn=Math.atan,En=Math.atan2,Sn=Math.cos,Mn=Math.sin,Nn=Math.sign||function(n){return n>0?1:n<0?-1:0},kn=Math.sqrt;var An={Feature:function(n,t){c(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,r=-1,i=e.length;++r<i;)c(e[r].geometry,t)}},Pn={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var e=n.coordinates,r=-1,i=e.length;++r<i;)n=e[r],t.point(n[0],n[1],n[2])},LineString:function(n,t){f(n.coordinates,t,0)},MultiLineString:function(n,t){for(var e=n.coordinates,r=-1,i=e.length;++r<i;)f(e[r],t,0)},Polygon:function(n,t){s(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,r=-1,i=e.length;++r<i;)s(e[r],t)},GeometryCollection:function(n,t){for(var e=n.geometries,r=-1,i=e.length;++r<i;)c(e[r],t)}};i(),i();i();b.invert=b;var jn=i();var On=O(function(){return!0},function(n){var t,e=NaN,r=NaN,i=NaN;return{lineStart:function(){n.lineStart(),t=1},point:function(o,u){var a=o>0?vn:-vn,l=bn(o-e);bn(l-vn)<dn?(n.point(e,r=(r+u)/2>0?gn:-gn),n.point(i,r),n.lineEnd(),n.lineStart(),n.point(a,r),n.point(o,r),t=0):i!==a&&l>=vn&&(bn(e-i)<dn&&(e-=i*dn),bn(o-a)<dn&&(o-=a*dn),r=function(n,t,e,r){var i,o,u=Mn(n-e);return bn(u)>dn?xn((Mn(t)*(o=Sn(r))*Mn(e)-Mn(r)*(i=Sn(t))*Mn(n))/(i*o*u)):(t+r)/2}(e,r,o,u),n.point(i,r),n.lineEnd(),n.lineStart(),n.point(a,r),t=0),n.point(e=o,r=u),i=a},lineEnd:function(){n.lineEnd(),e=r=NaN},clean:function(){return 2-t}}},function(n,t,e,r){var i;if(null==n)i=e*gn,r.point(-vn,i),r.point(0,i),r.point(vn,i),r.point(vn,0),r.point(vn,-i),r.point(0,-i),r.point(-vn,-i),r.point(-vn,0),r.point(-vn,i);else if(bn(n[0]-t[0])>dn){var o=n[0]<t[0]?vn:-vn;i=e*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])},[-vn,-gn]);var Cn=1e9,qn=-Cn;i();var Tn,In,Ln,zn,Rn=i(),Fn=i(),Dn={point:l,lineStart:l,lineEnd:l,polygonStart:function(){Dn.lineStart=z,Dn.lineEnd=D},polygonEnd:function(){Dn.lineStart=Dn.lineEnd=Dn.point=l,Rn.add(bn(Fn)),Fn.reset()},result:function(){var n=Rn/2;return Rn.reset(),n}};var Xn=1/0,Vn=Xn,Hn=-Xn,Yn=Hn,$n={point:function(n,t){n<Xn&&(Xn=n);n>Hn&&(Hn=n);t<Vn&&(Vn=t);t>Yn&&(Yn=t)},lineStart:l,lineEnd:l,polygonStart:l,polygonEnd:l,result:function(){var n=[[Xn,Vn],[Hn,Yn]];return Hn=Yn=-(Vn=Xn=1/0),n}};var Un,Bn,Jn,Gn,Wn=0,Kn=0,Qn=0,Zn=0,nt=0,tt=0,et=0,rt=0,it=0,ot={point:X,lineStart:V,lineEnd:$,polygonStart:function(){ot.lineStart=U,ot.lineEnd=B},polygonEnd:function(){ot.point=X,ot.lineStart=V,ot.lineEnd=$},result:function(){var n=it?[et/it,rt/it]:tt?[Zn/tt,nt/tt]:Qn?[Wn/Qn,Kn/Qn]:[NaN,NaN];return Wn=Kn=Qn=Zn=nt=tt=et=rt=it=0,n}};W.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(n,t){switch(this._point){case 0:this._context.moveTo(n,t),this._point=1;break;case 1:this._context.lineTo(n,t);break;default:this._context.moveTo(n+this._radius,t),this._context.arc(n,t,this._radius,0,mn)}},result:l};var ut,at,lt,ct,ft,st=i(),ht={point:l,lineStart:function(){ht.point=K},lineEnd:function(){ut&&Q(at,lt),ht.point=l},polygonStart:function(){ut=!0},polygonEnd:function(){ut=null},result:function(){var n=+st;return st.reset(),n}};Z.prototype={_radius:4.5,_circle:nn(4.5),pointRadius:function(n){return(n=+n)!==this._radius&&(this._radius=n,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(n,t){switch(this._point){case 0:this._string.push("M",n,",",t),this._point=1;break;case 1:this._string.push("L",n,",",t);break;default:null==this._circle&&(this._circle=nn(this._radius)),this._string.push("M",n,",",t,this._circle)}},result:function(){if(this._string.length){var n=this._string.join("");return this._string=[],n}return null}};rn.prototype={constructor:rn,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var pt=16,dt=Sn(30*_n);var vt=en({point:function(n,t){this.stream.point(n*_n,t*_n)}});"undefined"!=typeof window?window:void 0!==sr||"undefined"!=typeof self&&self;!function(n,t){t={exports:{}},n(t,t.exports),t.exports}(function(n,t){n.exports=function(){function n(n,t,e){return n instanceof Array?(n.push(e),n[n.length-1]):n instanceof Object?(n[t]=e,n[t]):void 0}return function(t){function e(t,r){for(var i in t){var o=t[i];if(o instanceof Date){var u=new Date(o.getTime());n(r,i,u)}else if(o instanceof Function){var u=o;n(r,i,u)}else if(o instanceof Array){var u=[],a=n(r,i,u);e(o,a)}else if(o instanceof Object){var u={},a=n(r,i,u);e(o,a)}else{var u=o;n(r,i,u)}}}if(/number|string|boolean/.test(void 0===t?"undefined":hr(t)))return t;if(t instanceof Date)return new Date(t.getTime());var r=t instanceof Array?[]:{};return e(t,r),r}}()});n.cartogram=function(){function n(n,e){n=t(n);for(var c,f,s,h=l(n.transform),p=n.arcs.length,d=0,v=new Array(p);d<p;){for(c=0,f=0,b=n.arcs[d].length,x=0,s=new Array(b);x<b;)n.arcs[d][x][0]=c+=n.arcs[d][x][0],n.arcs[d][x][1]=f+=n.arcs[d][x][1],s[x]=null===o?h(n.arcs[d][x]):o(h(n.arcs[d][x])),x++;v[d++]=s}var g=tn().projection(null),y=function(n,t){function e(t,e){e.length&&e.pop();for(var r=n[t<0?~t:t],i=0,o=r.length;i<o;++i)e.push(r[i]);t<0&&function(n,t){var e,r=n.length,i=r-t;for(;i<--r;)e=n[i],n[i++]=n[r],n[r]=e}(e,o)}function r(n){for(var t=[],r=0,i=n.length;r<i;++r)e(n[r],t);return t}function i(n){return n.map(r)}function o(n){return n=Object.create(n),n.coordinates=u[n.type](n.arcs),n}var u={LineString:r,MultiLineString:i,Polygon:i,MultiPolygon:function(n){return n.map(i)}};return"GeometryCollection"===t.type?(t=Object.create(t),t.geometries=t.geometries.map(o),t):o(t)}(v,{type:"GeometryCollection",geometries:e}).geometries.map(function(t){return{type:"Feature",id:t.id,properties:u.call(null,t,n),geometry:t}}),m=y.map(a),w=r(m);if(i<=0)return y;for(var _=0;_++<i;){for(var b,x,E,S,M,N,k,A,P,j,O,C,q,T,I=y.map(g.area),L=r(I),z=0,R=0,F=y.map(function(n,t){var e=Math.abs(I[t]),r=+m[t],i=L*r/w,o=Math.sqrt(e/Math.PI),u=Math.sqrt(i/Math.PI)-o,a=Math.max(e,i)/Math.min(e,i);return z+=a,R++,{id:n.id,area:e,centroid:g.centroid(n),value:r,desired:i,radius:o,mass:u,sizeError:a}}),D=z/R,X=1/(1+D),p=v.length,d=0;d<p;){for(b=v[d].length,x=0;x<b;){for(E=[0,0],S=F.length,M=0;M<S;)N=F[M].centroid,k=F[M].mass,A=F[M].radius,P=A*A,j=v[d][x][0]-N[0],O=v[d][x][1]-N[1],C=j*j+O*O,q=Math.sqrt(C),T=q>A?k*A/q:k*(C/P)*(4-3*q/A),E[0]+=T*function(n,t){if(0===t)return 0;var e=n/t;return t>0?1/Math.sqrt(1+e*e):-1/Math.sqrt(1+e*e)}(O,j),E[1]+=T*function(n,t){if(0===t)return 1;var e=n/t;return t>0?e/Math.sqrt(1+e*e):-e/Math.sqrt(1+e*e)}(O,j),M++;v[d][x][0]+=E[0]*X,v[d][x][1]+=E[1]*X,x++}d++}if(D<=1)break}return{features:y,arcs:v}}function t(n){return n instanceof Array?n.map(t):"string"==typeof n||"number"==typeof n?n:function(n){var e={};for(var r in n)e[r]=t(n[r]);return e}(n)}function e(n){return function(){return n}}var i=8,o=fn().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7]),u=function(n){return{}},a=function(n){return 1};n.path=tn().projection(null),n.iterations=function(t){return arguments.length?(i=t,n):i},n.value=function(t){return arguments.length?(a="function"==typeof t?t:e(t),n):a},n.projection=function(t){return arguments.length?(o=t,n):o},n.feature=function(n,t){return{type:"Feature",id:t.id,properties:u.call(null,t,n),geometry:{type:t.type,coordinates:function(n,t){return"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map(function(t){return hn(n,t)})}:hn(n,t)}(n,t).geometry.coordinates}}},n.features=function(t,e){return e.map(function(e){return n.feature(t,e)})},n.properties=function(t){return arguments.length?(u="function"==typeof t?t:e(t),n):u};var l=n.transformer=function(n){function t(n){return[n[0]*e+i,n[1]*r+o]}var e=n.scale[0],r=n.scale[1],i=n.translate[0],o=n.translate[1];return t.invert=function(n){return[(n[0]-i)/e,(n[1]-o)/r]},t};return n},Object.defineProperty(n,"__esModule",{value:!0})}(t)})),dr=dt(function(n,t){n.exports=function(n){function t(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return n[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var e={};return t.m=n,t.c=e,t.d=function(n,e,r){t.o(n,e)||Object.defineProperty(n,e,{configurable:!1,enumerable:!0,get:r})},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},t.p="",t(t.s=0)}([function(n,t,e){var r,i,o;i=[n,t,e(1)],void 0!==(o="function"==typeof(r=function(n,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(n){var t=n.stateInit,e=void 0===t?{}:t,o=n.props,u=void 0===o?{}:o,a=n.methods,l=void 0===a?{}:a,c=n.init,f=void 0===c?function(){}:c,s=n.update,h=void 0===s?function(){}:s,p=Object.keys(u).map(function(n){return new i(n,u[n])});return function(){function n(e){return o(e,t),u(),n}var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=Object.assign({},e,{initialised:!1}),o=function(t,e){f.call(n,t,i,e),i.initialised=!0},u=(0,r.default)(function(){i.initialised&&h.call(n,i)},1);return p.forEach(function(t){n[t.name]=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(n,t){};return function(o){return arguments.length?(i[t]=o,r.call(n,o,i),e&&u(),n):i[t]}}(t.name,t.triggerUpdate,t.onChange)}),Object.keys(l).forEach(function(t){n[t]=function(){for(var e,r=arguments.length,o=Array(r),u=0;u<r;u++)o[u]=arguments[u];return(e=l[t]).call.apply(e,[n,i].concat(o))}}),n.resetProps=function(){return p.forEach(function(t){n[t.name](t.defaultVal)}),n},n.resetProps(),i._rerender=u,n}};var r=function(n){return n&&n.__esModule?n:{default:n}}(e),i=function n(t,e){var r=e.default,i=void 0===r?null:r,o=e.triggerUpdate,u=void 0===o||o,a=e.onChange,l=void 0===a?function(n,t){}:a;(function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")})(this,n),this.name=t,this.defaultVal=i,this.triggerUpdate=u,this.onChange=l};n.exports=t.default})?r.apply(t,i):r)&&(n.exports=o)},function(n,t){n.exports=function(n,t,e){function r(){var c=Date.now()-a;c<t&&c>=0?i=setTimeout(r,t-c):(i=null,e||(l=n.apply(u,o),u=o=null))}var i,o,u,a,l;null==t&&(t=100);var c=function(){u=this,o=arguments,a=Date.now();var c=e&&!i;return i||(i=setTimeout(r,t)),c&&(l=n.apply(u,o),u=o=null),l};return c.clear=function(){i&&(clearTimeout(i),i=null)},c}}])}),vr=pt(dr),gr=(dr.Kapsule,dt(function(n,t){n.exports=function(n){function t(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return n[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var e={};return t.m=n,t.c=e,t.d=function(n,e,r){t.o(n,e)||Object.defineProperty(n,e,{configurable:!1,enumerable:!0,get:r})},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},t.p="",t(t.s=0)}([function(n,t,e){var r,i,o;i=[n,t],void 0!==(o="function"==typeof(r=function(n,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(n){return n instanceof Function?n:"string"==typeof n?function(t){return t[n]}:function(t){return n}},n.exports=t.default})?r.apply(t,i):r)&&(n.exports=o)}])})),yr=pt(gr),mr=(gr.accessorFn,pr.cartogram),wr=new vr({props:{width:{default:window.innerWidth},height:{default:window.innerHeight},iterations:{default:20},projection:{default:function(n){function t(){var t=Le*a(),u=o(function(n){function t(t){return t=n(t[0]*Xe,t[1]*Xe),t[0]*=De,t[1]*=De,t}return n=Vn(n[0]*Xe,n[1]*Xe,n.length>2?n[2]*Xe:0),t.invert=function(t){return t=n.invert(t[0]*Xe,t[1]*Xe),t[0]*=De,t[1]*=De,t},t}(o.rotate()).invert([0,0]));return c(null==f?[[u[0]-t,u[1]-t],[u[0]+t,u[1]+t]]:n===ht?[[Math.max(u[0]-t,f),e],[Math.min(u[0]+t,r),i]]:[[f,Math.max(u[1]-t,e)],[r,Math.min(u[1]+t,i)]])}var e,r,i,o=st(n),u=o.center,a=o.scale,l=o.translate,c=o.clipExtent,f=null;return o.scale=function(n){return arguments.length?(a(n),t()):a()},o.translate=function(n){return arguments.length?(l(n),t()):l()},o.center=function(n){return arguments.length?(u(n),t()):u()},o.clipExtent=function(n){return arguments.length?(null==n?f=e=r=i=null:(f=+n[0][0],e=+n[0][1],r=+n[1][0],i=+n[1][1]),t()):null==f?null:[[f,e],[r,i]]},t()}(ht).scale(961/Fe).scale(Math.min((window.innerWidth-3)/(2*Math.PI),(window.innerHeight-3)/(1.2*Math.PI))).translate([window.innerWidth/2,window.innerHeight/1.5])},topoJson:{},topoObjectName:{},value:{default:1},color:{default:"lightgrey"},label:{default:""},valFormatter:{default:function(n){return n}},units:{default:""},tooltipContent:{default:function(n){return""}},onClick:{default:function(n){}}},init:function(n,t){t.cartogram=mr().properties(function(n){return n.properties}),t.svg=O(n).append("svg").attr("class","cartogram"),t.tooltip=O("body").append("div").attr("class","chart-tooltip cartogram-tooltip"),n.addEventListener("DOMNodeRemoved",function(n){n.target===this&&t.tooltip.remove()}),t.svg.on("mousemove",function(){t.tooltip.style("left",xt.pageX+"px").style("top",xt.pageY+"px")})},update:function(n){var t=yr(n.value),e=yr(n.color),r=yr(n.label),i=yr(n.tooltipContent);if(n.svg.attr("width",n.width).attr("height",n.height),n.topoJson){var o=n.topoJson.objects[n.topoObjectName]||Object.values(n.topoJson.objects)[0];if(o){n.cartogram.projection(n.projection).value(t);var u=n.svg.selectAll("path.feature").data(n.cartogram.iterations(1)(n.topoJson,o.geometries).features);u.exit().remove();var a=u.enter().append("path").attr("class","feature").style("fill","lightgrey").attr("d",n.cartogram.path).on("mouseover",function(e){var o=r(e),u=i(e);n.tooltip.style("display","inline"),n.tooltip.html("\n          "+(o?"<b>"+o+"</b>:":"")+"\n          "+n.valFormatter(t(e))+"\n          "+n.units+"\n          "+(u?"<br/><br/>"+u:"")+"\n        ")}).on("mouseout",function(){n.tooltip.style("display","none")}).on("click",n.onClick);u.merge(a).data(n.cartogram.iterations(n.iterations)(n.topoJson,o.geometries).features).transition().duration(1200).style("fill",e).attr("d",n.cartogram.path)}else console.warn("Unable to find topology object in TopoJson")}}});return function(n,t){if("undefined"==typeof document)return t;n=n||"";var e=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e.appendChild(r),r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n))}(".cartogram .feature {\n    stroke: darkgrey;\n    transition: fill-opacity .7s;\n    cursor: pointer;\n}\n\n.cartogram .feature:hover {\n    fill-opacity: 0.6;\n    transition: fill-opacity .1s;\n}\n\n.cartogram-tooltip {\n    display: none;\n    position: absolute;\n    max-width: 320px;\n    margin-top: 20px;\n    margin-left: 8px;\n    padding: 5px;\n    border-radius: 3px;\n    font: 11px sans-serif;\n    color: #eee;\n    background: rgba(0, 0, 140, 0.8);\n    pointer-events: none;\n}",void 0),wr});